<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Comments Widget的自动主题和双评论系统 | Xeonzilla's Note</title>
<meta name=keywords content="技术,Hugo"><meta name=description content="起因 在初步完成个人Github Pages的搭建后，我就一直在考察除Giscus1外的其他评论系统。虽说Giscus托管在Github上、而且"><meta name=author content="Xeonzilla"><link rel=canonical href=https://xeonzilla.github.io/post/auto_theme_comments_system_with_comments_widget/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://xeonzilla.github.io/assets/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://xeonzilla.github.io/assets/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://xeonzilla.github.io/assets/favicon-32x32.png><link rel=apple-touch-icon href=https://xeonzilla.github.io/assets/apple-touch-icon.png><link rel=mask-icon href=https://xeonzilla.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://xeonzilla.github.io/post/auto_theme_comments_system_with_comments_widget/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Comments Widget的自动主题和双评论系统"><meta property="og:description" content="起因 在初步完成个人Github Pages的搭建后，我就一直在考察除Giscus1外的其他评论系统。虽说Giscus托管在Github上、而且"><meta property="og:type" content="article"><meta property="og:url" content="https://xeonzilla.github.io/post/auto_theme_comments_system_with_comments_widget/"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-08-20T22:54:00+08:00"><meta property="article:modified_time" content="2024-08-20T22:54:00+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Comments Widget的自动主题和双评论系统"><meta name=twitter:description content="起因 在初步完成个人Github Pages的搭建后，我就一直在考察除Giscus1外的其他评论系统。虽说Giscus托管在Github上、而且"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"归档","item":"https://xeonzilla.github.io/post/"},{"@type":"ListItem","position":2,"name":"Comments Widget的自动主题和双评论系统","item":"https://xeonzilla.github.io/post/auto_theme_comments_system_with_comments_widget/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Comments Widget的自动主题和双评论系统","name":"Comments Widget的自动主题和双评论系统","description":"起因 在初步完成个人Github Pages的搭建后，我就一直在考察除Giscus1外的其他评论系统。虽说Giscus托管在Github上、而且","keywords":["技术","Hugo"],"articleBody":"起因 在初步完成个人Github Pages的搭建后，我就一直在考察除Giscus1外的其他评论系统。虽说Giscus托管在Github上、而且免费开源、不包含广告，看上去全是优点，但是我忽略了一个重要的因素：用户来源。\n正如我在关于中所说，这个博客是我的动画Telegram频道2的一种拓展，主要发布的内容也是动画相关的观后感。至于技术博文或是其他内容，只有在我认为有必要时才起身写作。\n而Github Pages和Giscus，还是用在技术博客居多。在技术博客上要求用户使用Github登录，是一件非常自然、非常顺理成章的事；而在一篇动画观后感的评论区要求使用Github登录，显得有些离题万里、不合逻辑，这极有可能打击了用户的评论欲望。\n于是，我选择接入Comments Widget3，与Giscus组成博客的双评论系统，以缓解用户来源差异的问题。\n代码展示 代码大致能分为切换按钮、Giscus和Comments Widget三部分:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 \u003cdiv class=\"comment-toggle-buttons\"\u003e \u003cbutton id=\"show-giscus\" class=\"active\" onclick=\"showGiscus()\"\u003eGithub Discussions\u003c/button\u003e \u003cbutton id=\"show-telegram\" onclick=\"showTelegram()\"\u003eTelegram Comments\u003c/button\u003e \u003c/div\u003e \u003cdiv id=\"github-discussions\" class=\"comment-box\"\u003e\u003c/div\u003e \u003cdiv id=\"telegram-comments\" class=\"comment-box\"\u003e\u003c/div\u003e \u003cstyle\u003e .comment-toggle-buttons { display: flex; justify-content: center; margin-top: 50px; margin-bottom: 10px; gap: 10px; } #telegram-comments { min-height: 378.2px; display: none; } .comment-toggle-buttons button { display: block; padding: 0 14px; color: var(--primary); font-size: 14px; line-height: 34px; background: var(--code-bg); border-radius: var(--radius); border: 1px solid var(--border); } .comment-toggle-buttons button:hover { background: var(--border); } .comment-toggle-buttons button.active { pointer-events: none; background-color: transparent; } \u003c/style\u003e \u003cscript\u003e let telegramLoaded = false; function showGiscus() { document.getElementById('show-giscus').classList.add('active'); document.getElementById('show-telegram').classList.remove('active'); document.getElementById('github-discussions').style.display = 'block'; document.getElementById('telegram-comments').style.display = 'none'; setGiscusTheme(); } function showTelegram() { document.getElementById('show-giscus').classList.remove('active'); document.getElementById('show-telegram').classList.add('active'); document.getElementById('github-discussions').style.display = 'none'; document.getElementById('telegram-comments').style.display = 'block'; if (!telegramLoaded) { loadTelegramWidget(); telegramLoaded = true; } } const getStoredTheme = () =\u003e localStorage.getItem(\"pref-theme\") === \"dark\" ? \"dark\" : \"light\"; const setGiscusTheme = () =\u003e { const sendMessage = (message) =\u003e { const iframe = document.querySelector('iframe.giscus-frame'); if (iframe) { iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app'); } }; sendMessage({ setConfig: { theme: getStoredTheme() === 'dark' ? 'noborder_dark' : 'noborder_light' } }); }; const loadTelegramWidget = () =\u003e { const telegramDiv = document.getElementById('telegram-comments'); telegramDiv.innerHTML = \"\"; const telegramScript = document.createElement(\"script\"); telegramScript.src = \"https://comments.app/js/widget.js?3\"; telegramScript.defer = true; telegramScript.setAttribute(\"data-comments-app-website\", \"i7gjmkOw\"); telegramScript.setAttribute(\"data-limit\", \"100\"); telegramScript.setAttribute(\"data-height\", \"371\"); telegramScript.setAttribute(\"data-dislikes\", \"1\"); telegramScript.setAttribute(\"data-colorful\", \"1\"); telegramScript.setAttribute(\"data-dark\", getStoredTheme() === \"dark\" ? \"1\" : \"0\"); telegramDiv.appendChild(telegramScript); }; const setTelegramTheme = () =\u003e { loadTelegramWidget(); }; document.addEventListener(\"DOMContentLoaded\", () =\u003e { const giscusAttributes = { \"src\": \"https://giscus.app/client.js\", \"data-repo\": \"Xeonzilla/Xeonzilla.github.io\", \"data-repo-id\": \"R_kgDOL6BvNQ\", \"data-category\": \"Announcements\", \"data-category-id\": \"DIC_kwDOL6BvNc4Cfb8m\", \"data-mapping\": \"pathname\", \"data-strict\": \"1\", \"data-reactions-enabled\": \"1\", \"data-emit-metadata\": \"0\", \"data-input-position\": \"top\", \"data-theme\": getStoredTheme() === 'dark' ? 'noborder_dark' : 'noborder_light', \"data-lang\": \"zh-CN\", \"crossorigin\": \"anonymous\", }; const giscusScript = document.createElement(\"script\"); Object.entries(giscusAttributes).forEach( ([key, value]) =\u003e giscusScript.setAttribute(key, value)); giscusScript.defer = true; document.querySelector(\"#github-discussions\").appendChild(giscusScript); if (document.getElementById('telegram-comments').style.display === 'block') { loadTelegramWidget(); telegramLoaded = true; } const themeSwitcher = document.querySelector(\"#theme-toggle\"); if (themeSwitcher) { themeSwitcher.addEventListener(\"click\", () =\u003e { setGiscusTheme(); setTelegramTheme(); }); } }); \u003c/script\u003e 其中，Giscus的自动主题切换有现成的方案，具体可以参考\nHow to Enable Giscus Comments System in Hugo | Jason Lyu PaperMod 集成 Giscus 评论 | Tofuwine’s Blog 我的代码在他们的基础上小修小改，就不在此拾人牙慧了。\n下面的代码是从完整代码中分离出来的，它们极有可能无法独立工作，仅作解析思路用。\nComments Widget 官方页面会在你填入所需信息和所选项后自动生成代码，和Giscus类似，如无特殊需求，直接复制代码至layouts/partical/comments.html即可使用。\n但是为了实现功能，我们需要对代码进行改造。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 \u003cdiv id=\"telegram-comments\" class=\"comment-box\"\u003e\u003c/div\u003e \u003cstyle\u003e #telegram-comments { min-height: 378.2px; display: none; } \u003c/style\u003e \u003cscript\u003e let telegramLoaded = false; const getStoredTheme = () =\u003e localStorage.getItem(\"pref-theme\") === \"dark\" ? \"dark\" : \"light\"; const loadTelegramWidget = () =\u003e { const telegramDiv = document.getElementById('telegram-comments'); telegramDiv.innerHTML = \"\"; const telegramScript = document.createElement(\"script\"); telegramScript.src = \"https://comments.app/js/widget.js?3\"; telegramScript.defer = true; telegramScript.setAttribute(\"data-comments-app-website\", \"i7gjmkOw\"); telegramScript.setAttribute(\"data-limit\", \"100\"); telegramScript.setAttribute(\"data-height\", \"371\"); telegramScript.setAttribute(\"data-dislikes\", \"1\"); telegramScript.setAttribute(\"data-colorful\", \"1\"); telegramScript.setAttribute(\"data-dark\", getStoredTheme() === \"dark\" ? \"1\" : \"0\"); telegramDiv.appendChild(telegramScript); }; const setTelegramTheme = () =\u003e { loadTelegramWidget(); }; document.addEventListener(\"DOMContentLoaded\", () =\u003e { if (document.getElementById('telegram-comments').style.display === 'block') { loadTelegramWidget(); telegramLoaded = true; } }); \u003c/script\u003e 代码最核心的部分其实就是一个loadTelegramWidget()，以加载Comments Widget，其他的代码都依赖于此。\n我们需要监听页面主题的切换按钮，当页面主题切换时，触发setTelegramTheme()的操作。虽说这个行为的目的是主题设置，但是实际上是重新加载Comments Widget，从代码上也可以看出来。\n为什么是重载而不是直接切换主题呢？因为我似乎没有找到通过通信使Comments Widget切换主题的方法，Telegram也没有提供相关文档。我曾尝试将Giscus的代码逻辑套用到Comments Widget上，但是并不生效。以重载完成主题切换，是一种无奈之举。\n等我找到切换主题的方法，或是Telegram提供了相关文档，又或是有人给出了教程，这套方案就会被弃用。不管我如何完善和优化重载的逻辑，它在性能消耗和可靠性上还是不如原生的主题切换。\n重载能完成主题切换，但是我们不需要让它在任何操作后都重载，所以需要设置一个标志let telegramLoaded = false，当Comments Widget完成首次加载后将标志设置为true，避免用户多次切换评论区导致重复加载。\n在样式上，min-height: 378.2px起占位作用，在Comments Widget加载前维持页面元素的相对位置。378.2px是Giscus没有评论时的高度，也是所有情况下的最小高度，保持默认高度一致，使用户在切换评论系统时，页面元素不会位移。\n切换按钮 相比之下，切换按钮的逻辑就较为简单，主要是样式上的调整。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 \u003cdiv class=\"comment-toggle-buttons\"\u003e \u003cbutton id=\"show-giscus\" class=\"active\" onclick=\"showGiscus()\"\u003eGithub Discussions\u003c/button\u003e \u003cbutton id=\"show-telegram\" onclick=\"showTelegram()\"\u003eTelegram Comments\u003c/button\u003e \u003c/div\u003e \u003cstyle\u003e .comment-toggle-buttons { display: flex; justify-content: center; margin-top: 50px; margin-bottom: 10px; gap: 10px; } .comment-toggle-buttons button { display: block; padding: 0 14px; color: var(--primary); font-size: 14px; line-height: 34px; background: var(--code-bg); border-radius: var(--radius); border: 1px solid var(--border); } .comment-toggle-buttons button:hover { background: var(--border); } .comment-toggle-buttons button.active { pointer-events: none; background-color: transparent; } \u003c/style\u003e \u003cscript\u003e let telegramLoaded = false; function showGiscus() { document.getElementById('show-giscus').classList.add('active'); document.getElementById('show-telegram').classList.remove('active'); document.getElementById('github-discussions').style.display = 'block'; document.getElementById('telegram-comments').style.display = 'none'; setGiscusTheme(); } function showTelegram() { document.getElementById('show-giscus').classList.remove('active'); document.getElementById('show-telegram').classList.add('active'); document.getElementById('github-discussions').style.display = 'none'; document.getElementById('telegram-comments').style.display = 'block'; if (!telegramLoaded) { loadTelegramWidget(); telegramLoaded = true; } } const themeSwitcher = document.querySelector(\"#theme-toggle\"); if (themeSwitcher) { themeSwitcher.addEventListener(\"click\", () =\u003e { setGiscusTheme(); setTelegramTheme(); }); } \u003c/script\u003e 大部分的样式都遵循主题的设定，使按钮与主题看上去更和谐统一。\n通过class=\"active\"与display: block、display: none间的切换、隐藏与显示，我们得以用控制两个评论区的显示。\n将pointer-events: none应用在当前激活的评论区按钮上，能够使用户无法再次选中，杜绝了很多奇怪bug触发的可能性。\n为什么不是Discussion Widget Telegram除了提供Comments Widget外，还提供了Discussion Widget4将频道的评论区接入网页，同样可以作为评论系统，但是它存在着挺多问题：\n博客评论区与频道评论区完全关联 Telegram无法识别经编辑的链接 完全关联这一点很好理解，毕竟Discussion Widget就是起到一种“桥接”的作用，将博客与频道绑定起来。如果我发布了技术博文，但我不想将链接广播到我的动画频道，这时的Discussion Widget就无法起到评论系统的作用。\n第二点问题不知是Telegram设计上的问题还是特性，当第一次发送链接时，Telegram能够主动识别；而如果是一条经过编辑的消息，即使它是链接，Telegram也不会识别。\n这样的特性不仅为Discussion Widget带来不便，还在广告投放者手中“被妙用”：他们往往会先在群组中发送一条正常的消息，随后将消息编辑为广告文案，以此躲过反广告机器人的识别与检测。\n总体而言，Discussion Widget并不是一套完善、高度可用的评论系统，它更适用于日常社交与个人Telegram频道相关性强的用户，否则，Discussion Widget并没有与Waline一较高下的实力。\n如果像我一样已经有一个公开频道，此时接入Discussion Widget将会非常不便，需要为旧博文手动关联评论区，影响频道的内容展示；而如果没有公开频道，创建并使用Discussion Widget也未尝不可。\n或许是Waline 在第二个评论系统的选择上，我也有短暂考虑过Waline5，它被广泛使用、口碑良好且没有广告，给我的第一印象不错。\n唯一的问题就是，它需要部署。虽说Waline也可以免费部署到Vercel6，但是我个人还是倾向于使用一些现成的服务，例如Giscus的使用Github Discussion，Comments Widget的接入Telegram。\n使用额外部署的评论系统、调用一套第三方服务，就像引入新的外部依赖，它不一定会让博客变得不稳定，但是会让我感到复杂、不安定。相比之下，使用Comments Widget，将评论系统接入日常使用的社交软件，给我的感觉更合理、更无缝。\n但是结论不能没有余地，当有需要再次添加评论系统，或是博客重构的时候，Waline（或是它的继任者）会是一个好选择。\ngiscus ↩︎\nXeon的Anime观察日志 ↩︎\nComments for websites ↩︎\nDiscussion Widget ↩︎\nWaline | Waline ↩︎\nVercel: Build and deploy the best web experiences with the Frontend Cloud ↩︎\n","wordCount":"3258","inLanguage":"zh","datePublished":"2024-08-20T22:54:00+08:00","dateModified":"2024-08-20T22:54:00+08:00","author":{"@type":"Person","name":"Xeonzilla"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xeonzilla.github.io/post/auto_theme_comments_system_with_comments_widget/"},"publisher":{"@type":"Organization","name":"Xeonzilla's Note","logo":{"@type":"ImageObject","url":"https://xeonzilla.github.io/assets/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xeonzilla.github.io/ accesskey=h title="Xeonzilla's Note (Alt + H)"><img src=https://xeonzilla.github.io/assets/apple-touch-icon.png alt aria-label=logo height=30>Xeonzilla's Note</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://xeonzilla.github.io/search title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li><li><a href=https://xeonzilla.github.io/ title=主页><span>主页</span></a></li><li><a href=https://xeonzilla.github.io/about title=关于><span>关于</span></a></li><li><a href=https://xeonzilla.github.io/post title=归档><span>归档</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://xeonzilla.github.io/>主页</a>&nbsp;»&nbsp;<a href=https://xeonzilla.github.io/post/>归档</a></div><h1 class="post-title entry-hint-parent">Comments Widget的自动主题和双评论系统</h1><div class=post-meta><span title='2024-08-20 22:54:00 +0800 +0800'>08-20, 2024</span>&nbsp;·&nbsp;7 分钟&nbsp;·&nbsp;3258 字&nbsp;·&nbsp;Xeonzilla</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e8%b5%b7%e5%9b%a0 aria-label=起因>起因</a></li><li><a href=#%e4%bb%a3%e7%a0%81%e5%b1%95%e7%a4%ba aria-label=代码展示>代码展示</a><ul><li><a href=#comments-widget aria-label="Comments Widget">Comments Widget</a></li><li><a href=#%e5%88%87%e6%8d%a2%e6%8c%89%e9%92%ae aria-label=切换按钮>切换按钮</a></li></ul></li><li><a href=#%e4%b8%ba%e4%bb%80%e4%b9%88%e4%b8%8d%e6%98%afdiscussion-widget aria-label="为什么不是Discussion Widget">为什么不是Discussion Widget</a></li><li><a href=#%e6%88%96%e8%ae%b8%e6%98%afwaline aria-label=或许是Waline>或许是Waline</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=起因>起因<a hidden class=anchor aria-hidden=true href=#起因>#</a></h2><p>在初步完成个人Github Pages的搭建后，我就一直在考察除Giscus<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>外的其他评论系统。虽说Giscus托管在Github上、而且免费开源、不包含广告，看上去全是优点，但是我忽略了一个重要的因素：用户来源。</p><p>正如我在<a href=https://xeonzilla.github.io/about/>关于</a>中所说，这个博客是我的动画Telegram频道<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>的一种拓展，主要发布的内容也是动画相关的观后感。至于技术博文或是其他内容，只有在我认为有必要时才起身写作。</p><p>而Github Pages和Giscus，还是用在技术博客居多。在技术博客上要求用户使用Github登录，是一件非常自然、非常顺理成章的事；而在一篇动画观后感的评论区要求使用Github登录，显得有些离题万里、不合逻辑，这极有可能打击了用户的评论欲望。</p><p>于是，我选择接入Comments Widget<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>，与Giscus组成博客的双评论系统，以缓解用户来源差异的问题。</p><h2 id=代码展示>代码展示<a hidden class=anchor aria-hidden=true href=#代码展示>#</a></h2><p>代码大致能分为切换按钮、Giscus和Comments Widget三部分:</p><div class=highlight><div style=color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">133
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#58a1dd>div</span> <span style=color:#58a1dd>class</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;comment-toggle-buttons&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#58a1dd>button</span> <span style=color:#58a1dd>id</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;show-giscus&#34;</span> <span style=color:#58a1dd>class</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;active&#34;</span> <span style=color:#58a1dd>onclick</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;showGiscus()&#34;</span>&gt;Github Discussions&lt;/<span style=color:#58a1dd>button</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#58a1dd>button</span> <span style=color:#58a1dd>id</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;show-telegram&#34;</span> <span style=color:#58a1dd>onclick</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;showTelegram()&#34;</span>&gt;Telegram Comments&lt;/<span style=color:#58a1dd>button</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#58a1dd>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#58a1dd>div</span> <span style=color:#58a1dd>id</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;github-discussions&#34;</span> <span style=color:#58a1dd>class</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;comment-box&#34;</span>&gt;&lt;/<span style=color:#58a1dd>div</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#58a1dd>div</span> <span style=color:#58a1dd>id</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;telegram-comments&#34;</span> <span style=color:#58a1dd>class</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;comment-box&#34;</span>&gt;&lt;/<span style=color:#58a1dd>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#58a1dd>style</span>&gt;
</span></span><span style=display:flex><span>    .<span style=color:#58a1dd>comment-toggle-buttons</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff636f>display</span>: <span style=color:#ff636f>flex</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>justify-content</span>: <span style=color:#ff636f>center</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>margin-top</span>: <span style=color:#a6be9d>50</span><span style=color:#ff636f>px</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>margin-bottom</span>: <span style=color:#a6be9d>10</span><span style=color:#ff636f>px</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>gap</span>: <span style=color:#a6be9d>10</span><span style=color:#ff636f>px</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    #<span style=color:#58a1dd>telegram-comments</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff636f>min-height</span>: <span style=color:#a6be9d>378.2</span><span style=color:#ff636f>px</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>display</span>: <span style=color:#ff636f>none</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    .<span style=color:#58a1dd>comment-toggle-buttons</span> <span style=color:#58a1dd>button</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff636f>display</span>: <span style=color:#ff636f>block</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>padding</span>: <span style=color:#a6be9d>0</span> <span style=color:#a6be9d>14</span><span style=color:#ff636f>px</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>color</span>: <span style=color:#58a1dd>var</span>(<span style=color:#ff636f>--</span><span style=color:#58a1dd>primary</span>);
</span></span><span style=display:flex><span>        <span style=color:#ff636f>font-size</span>: <span style=color:#a6be9d>14</span><span style=color:#ff636f>px</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>line-height</span>: <span style=color:#a6be9d>34</span><span style=color:#ff636f>px</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>background</span>: <span style=color:#58a1dd>var</span>(<span style=color:#ff636f>--</span><span style=color:#58a1dd>code</span><span style=color:#ff636f>-</span><span style=color:#58a1dd>bg</span>);
</span></span><span style=display:flex><span>        <span style=color:#ff636f>border-radius</span>: <span style=color:#58a1dd>var</span>(<span style=color:#ff636f>--</span><span style=color:#58a1dd>radius</span>);
</span></span><span style=display:flex><span>        <span style=color:#ff636f>border</span>: <span style=color:#a6be9d>1</span><span style=color:#ff636f>px</span> <span style=color:#ff636f>solid</span> <span style=color:#58a1dd>var</span>(<span style=color:#ff636f>--</span><span style=color:#58a1dd>border</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    .<span style=color:#58a1dd>comment-toggle-buttons</span> <span style=color:#58a1dd>button</span>:<span style=color:#58a1dd>hover</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff636f>background</span>: <span style=color:#58a1dd>var</span>(<span style=color:#ff636f>--</span><span style=color:#58a1dd>border</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    .<span style=color:#58a1dd>comment-toggle-buttons</span> <span style=color:#58a1dd>button</span>.<span style=color:#58a1dd>active</span> {
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>pointer-events</span>: <span style=color:#ff636f>none</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>background-color</span>: <span style=color:#ff636f>transparent</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>&lt;/<span style=color:#58a1dd>style</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#58a1dd>script</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#ff636f>let</span> <span style=color:#58a1dd>telegramLoaded</span> <span style=color:#ff636f>=</span> <span style=color:#ff636f>false</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff636f>function</span> <span style=color:#58a1dd>showGiscus</span>() {
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;show-giscus&#39;</span>).<span style=color:#58a1dd>classList</span>.<span style=color:#58a1dd>add</span>(<span style=color:#a6be9d>&#39;active&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;show-telegram&#39;</span>).<span style=color:#58a1dd>classList</span>.<span style=color:#58a1dd>remove</span>(<span style=color:#a6be9d>&#39;active&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;github-discussions&#39;</span>).<span style=color:#58a1dd>style</span>.<span style=color:#58a1dd>display</span> <span style=color:#ff636f>=</span> <span style=color:#a6be9d>&#39;block&#39;</span>;
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;telegram-comments&#39;</span>).<span style=color:#58a1dd>style</span>.<span style=color:#58a1dd>display</span> <span style=color:#ff636f>=</span> <span style=color:#a6be9d>&#39;none&#39;</span>;
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>setGiscusTheme</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff636f>function</span> <span style=color:#58a1dd>showTelegram</span>() {
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;show-giscus&#39;</span>).<span style=color:#58a1dd>classList</span>.<span style=color:#58a1dd>remove</span>(<span style=color:#a6be9d>&#39;active&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;show-telegram&#39;</span>).<span style=color:#58a1dd>classList</span>.<span style=color:#58a1dd>add</span>(<span style=color:#a6be9d>&#39;active&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;github-discussions&#39;</span>).<span style=color:#58a1dd>style</span>.<span style=color:#58a1dd>display</span> <span style=color:#ff636f>=</span> <span style=color:#a6be9d>&#39;none&#39;</span>;
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;telegram-comments&#39;</span>).<span style=color:#58a1dd>style</span>.<span style=color:#58a1dd>display</span> <span style=color:#ff636f>=</span> <span style=color:#a6be9d>&#39;block&#39;</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>if</span> (<span style=color:#ff636f>!</span><span style=color:#58a1dd>telegramLoaded</span>) {
</span></span><span style=display:flex><span>            <span style=color:#58a1dd>loadTelegramWidget</span>();
</span></span><span style=display:flex><span>            <span style=color:#58a1dd>telegramLoaded</span> <span style=color:#ff636f>=</span> <span style=color:#ff636f>true</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff636f>const</span> <span style=color:#58a1dd>getStoredTheme</span> <span style=color:#ff636f>=</span> () =&gt; <span style=color:#58a1dd>localStorage</span>.<span style=color:#58a1dd>getItem</span>(<span style=color:#a6be9d>&#34;pref-theme&#34;</span>) <span style=color:#ff636f>===</span> <span style=color:#a6be9d>&#34;dark&#34;</span> <span style=color:#ff636f>?</span> <span style=color:#a6be9d>&#34;dark&#34;</span> <span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#34;light&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff636f>const</span> <span style=color:#58a1dd>setGiscusTheme</span> <span style=color:#ff636f>=</span> () =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff636f>const</span> <span style=color:#58a1dd>sendMessage</span> <span style=color:#ff636f>=</span> (<span style=color:#58a1dd>message</span>) =&gt; {
</span></span><span style=display:flex><span>            <span style=color:#ff636f>const</span> <span style=color:#58a1dd>iframe</span> <span style=color:#ff636f>=</span> <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>querySelector</span>(<span style=color:#a6be9d>&#39;iframe.giscus-frame&#39;</span>);
</span></span><span style=display:flex><span>            <span style=color:#ff636f>if</span> (<span style=color:#58a1dd>iframe</span>) {
</span></span><span style=display:flex><span>                <span style=color:#58a1dd>iframe</span>.<span style=color:#58a1dd>contentWindow</span>.<span style=color:#58a1dd>postMessage</span>({ <span style=color:#58a1dd>giscus</span><span style=color:#ff636f>:</span> <span style=color:#58a1dd>message</span> }, <span style=color:#a6be9d>&#39;https://giscus.app&#39;</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>sendMessage</span>({ <span style=color:#58a1dd>setConfig</span><span style=color:#ff636f>:</span> { <span style=color:#58a1dd>theme</span><span style=color:#ff636f>:</span> <span style=color:#58a1dd>getStoredTheme</span>() <span style=color:#ff636f>===</span> <span style=color:#a6be9d>&#39;dark&#39;</span> <span style=color:#ff636f>?</span> <span style=color:#a6be9d>&#39;noborder_dark&#39;</span> <span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#39;noborder_light&#39;</span> } });
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff636f>const</span> <span style=color:#58a1dd>loadTelegramWidget</span> <span style=color:#ff636f>=</span> () =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff636f>const</span> <span style=color:#58a1dd>telegramDiv</span> <span style=color:#ff636f>=</span> <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;telegram-comments&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramDiv</span>.<span style=color:#58a1dd>innerHTML</span> <span style=color:#ff636f>=</span> <span style=color:#a6be9d>&#34;&#34;</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>const</span> <span style=color:#58a1dd>telegramScript</span> <span style=color:#ff636f>=</span> <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>createElement</span>(<span style=color:#a6be9d>&#34;script&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramScript</span>.<span style=color:#58a1dd>src</span> <span style=color:#ff636f>=</span> <span style=color:#a6be9d>&#34;https://comments.app/js/widget.js?3&#34;</span>;
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramScript</span>.<span style=color:#58a1dd>defer</span> <span style=color:#ff636f>=</span> <span style=color:#ff636f>true</span>;
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramScript</span>.<span style=color:#58a1dd>setAttribute</span>(<span style=color:#a6be9d>&#34;data-comments-app-website&#34;</span>, <span style=color:#a6be9d>&#34;i7gjmkOw&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramScript</span>.<span style=color:#58a1dd>setAttribute</span>(<span style=color:#a6be9d>&#34;data-limit&#34;</span>, <span style=color:#a6be9d>&#34;100&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramScript</span>.<span style=color:#58a1dd>setAttribute</span>(<span style=color:#a6be9d>&#34;data-height&#34;</span>, <span style=color:#a6be9d>&#34;371&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramScript</span>.<span style=color:#58a1dd>setAttribute</span>(<span style=color:#a6be9d>&#34;data-dislikes&#34;</span>, <span style=color:#a6be9d>&#34;1&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramScript</span>.<span style=color:#58a1dd>setAttribute</span>(<span style=color:#a6be9d>&#34;data-colorful&#34;</span>, <span style=color:#a6be9d>&#34;1&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramScript</span>.<span style=color:#58a1dd>setAttribute</span>(<span style=color:#a6be9d>&#34;data-dark&#34;</span>, <span style=color:#58a1dd>getStoredTheme</span>() <span style=color:#ff636f>===</span> <span style=color:#a6be9d>&#34;dark&#34;</span> <span style=color:#ff636f>?</span> <span style=color:#a6be9d>&#34;1&#34;</span> <span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#34;0&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramDiv</span>.<span style=color:#58a1dd>appendChild</span>(<span style=color:#58a1dd>telegramScript</span>);
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff636f>const</span> <span style=color:#58a1dd>setTelegramTheme</span> <span style=color:#ff636f>=</span> () =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>loadTelegramWidget</span>();
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>addEventListener</span>(<span style=color:#a6be9d>&#34;DOMContentLoaded&#34;</span>, () =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff636f>const</span> <span style=color:#58a1dd>giscusAttributes</span> <span style=color:#ff636f>=</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6be9d>&#34;src&#34;</span><span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#34;https://giscus.app/client.js&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6be9d>&#34;data-repo&#34;</span><span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#34;Xeonzilla/Xeonzilla.github.io&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6be9d>&#34;data-repo-id&#34;</span><span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#34;R_kgDOL6BvNQ&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6be9d>&#34;data-category&#34;</span><span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#34;Announcements&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6be9d>&#34;data-category-id&#34;</span><span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#34;DIC_kwDOL6BvNc4Cfb8m&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6be9d>&#34;data-mapping&#34;</span><span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#34;pathname&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6be9d>&#34;data-strict&#34;</span><span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#34;1&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6be9d>&#34;data-reactions-enabled&#34;</span><span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#34;1&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6be9d>&#34;data-emit-metadata&#34;</span><span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#34;0&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6be9d>&#34;data-input-position&#34;</span><span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#34;top&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6be9d>&#34;data-theme&#34;</span><span style=color:#ff636f>:</span> <span style=color:#58a1dd>getStoredTheme</span>() <span style=color:#ff636f>===</span> <span style=color:#a6be9d>&#39;dark&#39;</span> <span style=color:#ff636f>?</span> <span style=color:#a6be9d>&#39;noborder_dark&#39;</span> <span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#39;noborder_light&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6be9d>&#34;data-lang&#34;</span><span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#34;zh-CN&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6be9d>&#34;crossorigin&#34;</span><span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#34;anonymous&#34;</span>,
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff636f>const</span> <span style=color:#58a1dd>giscusScript</span> <span style=color:#ff636f>=</span> <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>createElement</span>(<span style=color:#a6be9d>&#34;script&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>Object</span>.<span style=color:#58a1dd>entries</span>(<span style=color:#58a1dd>giscusAttributes</span>).<span style=color:#58a1dd>forEach</span>(
</span></span><span style=display:flex><span>            ([<span style=color:#58a1dd>key</span>, <span style=color:#58a1dd>value</span>]) =&gt; <span style=color:#58a1dd>giscusScript</span>.<span style=color:#58a1dd>setAttribute</span>(<span style=color:#58a1dd>key</span>, <span style=color:#58a1dd>value</span>));
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>giscusScript</span>.<span style=color:#58a1dd>defer</span> <span style=color:#ff636f>=</span> <span style=color:#ff636f>true</span>;
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>querySelector</span>(<span style=color:#a6be9d>&#34;#github-discussions&#34;</span>).<span style=color:#58a1dd>appendChild</span>(<span style=color:#58a1dd>giscusScript</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff636f>if</span> (<span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;telegram-comments&#39;</span>).<span style=color:#58a1dd>style</span>.<span style=color:#58a1dd>display</span> <span style=color:#ff636f>===</span> <span style=color:#a6be9d>&#39;block&#39;</span>) {
</span></span><span style=display:flex><span>            <span style=color:#58a1dd>loadTelegramWidget</span>();
</span></span><span style=display:flex><span>            <span style=color:#58a1dd>telegramLoaded</span> <span style=color:#ff636f>=</span> <span style=color:#ff636f>true</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff636f>const</span> <span style=color:#58a1dd>themeSwitcher</span> <span style=color:#ff636f>=</span> <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>querySelector</span>(<span style=color:#a6be9d>&#34;#theme-toggle&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#ff636f>if</span> (<span style=color:#58a1dd>themeSwitcher</span>) {
</span></span><span style=display:flex><span>            <span style=color:#58a1dd>themeSwitcher</span>.<span style=color:#58a1dd>addEventListener</span>(<span style=color:#a6be9d>&#34;click&#34;</span>, () =&gt; {
</span></span><span style=display:flex><span>                <span style=color:#58a1dd>setGiscusTheme</span>();
</span></span><span style=display:flex><span>                <span style=color:#58a1dd>setTelegramTheme</span>();
</span></span><span style=display:flex><span>            });
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>&lt;/<span style=color:#58a1dd>script</span>&gt;
</span></span></code></pre></td></tr></table></div></div><p>其中，Giscus的自动主题切换有现成的方案，具体可以参考</p><ul><li><a href=https://12x.me/posts/2023-04-18-hugo-giscus/>How to Enable Giscus Comments System in Hugo | Jason Lyu</a></li><li><a href=https://www.tofuwine.cn/posts/610b75f5/>PaperMod 集成 Giscus 评论 | Tofuwine&rsquo;s Blog</a></li></ul><p>我的代码在他们的基础上小修小改，就不在此拾人牙慧了。</p><p>下面的代码是从完整代码中分离出来的，它们极有可能<strong>无法独立工作</strong>，仅作解析思路用。</p><h3 id=comments-widget>Comments Widget<a hidden class=anchor aria-hidden=true href=#comments-widget>#</a></h3><p>官方页面会在你填入所需信息和所选项后自动生成代码，和Giscus类似，如无特殊需求，直接复制代码至<code>layouts/partical/comments.html</code>即可使用。</p><p>但是为了实现功能，我们需要对代码进行改造。</p><div class=highlight><div style=color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">40
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#58a1dd>div</span> <span style=color:#58a1dd>id</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;telegram-comments&#34;</span> <span style=color:#58a1dd>class</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;comment-box&#34;</span>&gt;&lt;/<span style=color:#58a1dd>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#58a1dd>style</span>&gt;
</span></span><span style=display:flex><span>    #<span style=color:#58a1dd>telegram-comments</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff636f>min-height</span>: <span style=color:#a6be9d>378.2</span><span style=color:#ff636f>px</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>display</span>: <span style=color:#ff636f>none</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>&lt;/<span style=color:#58a1dd>style</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#58a1dd>script</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#ff636f>let</span> <span style=color:#58a1dd>telegramLoaded</span> <span style=color:#ff636f>=</span> <span style=color:#ff636f>false</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff636f>const</span> <span style=color:#58a1dd>getStoredTheme</span> <span style=color:#ff636f>=</span> () =&gt; <span style=color:#58a1dd>localStorage</span>.<span style=color:#58a1dd>getItem</span>(<span style=color:#a6be9d>&#34;pref-theme&#34;</span>) <span style=color:#ff636f>===</span> <span style=color:#a6be9d>&#34;dark&#34;</span> <span style=color:#ff636f>?</span> <span style=color:#a6be9d>&#34;dark&#34;</span> <span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#34;light&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff636f>const</span> <span style=color:#58a1dd>loadTelegramWidget</span> <span style=color:#ff636f>=</span> () =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff636f>const</span> <span style=color:#58a1dd>telegramDiv</span> <span style=color:#ff636f>=</span> <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;telegram-comments&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramDiv</span>.<span style=color:#58a1dd>innerHTML</span> <span style=color:#ff636f>=</span> <span style=color:#a6be9d>&#34;&#34;</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>const</span> <span style=color:#58a1dd>telegramScript</span> <span style=color:#ff636f>=</span> <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>createElement</span>(<span style=color:#a6be9d>&#34;script&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramScript</span>.<span style=color:#58a1dd>src</span> <span style=color:#ff636f>=</span> <span style=color:#a6be9d>&#34;https://comments.app/js/widget.js?3&#34;</span>;
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramScript</span>.<span style=color:#58a1dd>defer</span> <span style=color:#ff636f>=</span> <span style=color:#ff636f>true</span>;
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramScript</span>.<span style=color:#58a1dd>setAttribute</span>(<span style=color:#a6be9d>&#34;data-comments-app-website&#34;</span>, <span style=color:#a6be9d>&#34;i7gjmkOw&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramScript</span>.<span style=color:#58a1dd>setAttribute</span>(<span style=color:#a6be9d>&#34;data-limit&#34;</span>, <span style=color:#a6be9d>&#34;100&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramScript</span>.<span style=color:#58a1dd>setAttribute</span>(<span style=color:#a6be9d>&#34;data-height&#34;</span>, <span style=color:#a6be9d>&#34;371&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramScript</span>.<span style=color:#58a1dd>setAttribute</span>(<span style=color:#a6be9d>&#34;data-dislikes&#34;</span>, <span style=color:#a6be9d>&#34;1&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramScript</span>.<span style=color:#58a1dd>setAttribute</span>(<span style=color:#a6be9d>&#34;data-colorful&#34;</span>, <span style=color:#a6be9d>&#34;1&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramScript</span>.<span style=color:#58a1dd>setAttribute</span>(<span style=color:#a6be9d>&#34;data-dark&#34;</span>, <span style=color:#58a1dd>getStoredTheme</span>() <span style=color:#ff636f>===</span> <span style=color:#a6be9d>&#34;dark&#34;</span> <span style=color:#ff636f>?</span> <span style=color:#a6be9d>&#34;1&#34;</span> <span style=color:#ff636f>:</span> <span style=color:#a6be9d>&#34;0&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>telegramDiv</span>.<span style=color:#58a1dd>appendChild</span>(<span style=color:#58a1dd>telegramScript</span>);
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff636f>const</span> <span style=color:#58a1dd>setTelegramTheme</span> <span style=color:#ff636f>=</span> () =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>loadTelegramWidget</span>();
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>addEventListener</span>(<span style=color:#a6be9d>&#34;DOMContentLoaded&#34;</span>, () =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff636f>if</span> (<span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;telegram-comments&#39;</span>).<span style=color:#58a1dd>style</span>.<span style=color:#58a1dd>display</span> <span style=color:#ff636f>===</span> <span style=color:#a6be9d>&#39;block&#39;</span>) {
</span></span><span style=display:flex><span>            <span style=color:#58a1dd>loadTelegramWidget</span>();
</span></span><span style=display:flex><span>            <span style=color:#58a1dd>telegramLoaded</span> <span style=color:#ff636f>=</span> <span style=color:#ff636f>true</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>&lt;/<span style=color:#58a1dd>script</span>&gt;
</span></span></code></pre></td></tr></table></div></div><p>代码最核心的部分其实就是一个<code>loadTelegramWidget()</code>，以加载Comments Widget，其他的代码都依赖于此。</p><p>我们需要监听页面主题的切换按钮，当页面主题切换时，触发<code>setTelegramTheme()</code>的操作。虽说这个行为的目的是主题设置，但是实际上是重新加载Comments Widget，从代码上也可以看出来。</p><p>为什么是重载而不是直接切换主题呢？因为我似乎没有找到通过通信使Comments Widget切换主题的方法，Telegram也没有提供相关文档。我曾尝试将Giscus的代码逻辑套用到Comments Widget上，但是并不生效。以重载完成主题切换，是一种无奈之举。</p><p>等我找到切换主题的方法，或是Telegram提供了相关文档，又或是有人给出了教程，这套方案就会被弃用。不管我如何完善和优化重载的逻辑，它在性能消耗和可靠性上还是不如原生的主题切换。</p><p>重载能完成主题切换，但是我们不需要让它在任何操作后都重载，所以需要设置一个标志<code>let telegramLoaded = false</code>，当Comments Widget完成首次加载后将标志设置为<code>true</code>，避免用户多次切换评论区导致重复加载。</p><p>在样式上，<code>min-height: 378.2px</code>起占位作用，在Comments Widget加载前维持页面元素的相对位置。378.2px是Giscus没有评论时的高度，也是所有情况下的最小高度，保持默认高度一致，使用户在切换评论系统时，页面元素不会位移。</p><h3 id=切换按钮>切换按钮<a hidden class=anchor aria-hidden=true href=#切换按钮>#</a></h3><p>相比之下，切换按钮的逻辑就较为简单，主要是样式上的调整。</p><div class=highlight><div style=color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8e9198">65
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#58a1dd>div</span> <span style=color:#58a1dd>class</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;comment-toggle-buttons&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#58a1dd>button</span> <span style=color:#58a1dd>id</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;show-giscus&#34;</span> <span style=color:#58a1dd>class</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;active&#34;</span> <span style=color:#58a1dd>onclick</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;showGiscus()&#34;</span>&gt;Github Discussions&lt;/<span style=color:#58a1dd>button</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#58a1dd>button</span> <span style=color:#58a1dd>id</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;show-telegram&#34;</span> <span style=color:#58a1dd>onclick</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;showTelegram()&#34;</span>&gt;Telegram Comments&lt;/<span style=color:#58a1dd>button</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#58a1dd>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#58a1dd>style</span>&gt;
</span></span><span style=display:flex><span>    .<span style=color:#58a1dd>comment-toggle-buttons</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff636f>display</span>: <span style=color:#ff636f>flex</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>justify-content</span>: <span style=color:#ff636f>center</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>margin-top</span>: <span style=color:#a6be9d>50</span><span style=color:#ff636f>px</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>margin-bottom</span>: <span style=color:#a6be9d>10</span><span style=color:#ff636f>px</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>gap</span>: <span style=color:#a6be9d>10</span><span style=color:#ff636f>px</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    .<span style=color:#58a1dd>comment-toggle-buttons</span> <span style=color:#58a1dd>button</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff636f>display</span>: <span style=color:#ff636f>block</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>padding</span>: <span style=color:#a6be9d>0</span> <span style=color:#a6be9d>14</span><span style=color:#ff636f>px</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>color</span>: <span style=color:#58a1dd>var</span>(<span style=color:#ff636f>--</span><span style=color:#58a1dd>primary</span>);
</span></span><span style=display:flex><span>        <span style=color:#ff636f>font-size</span>: <span style=color:#a6be9d>14</span><span style=color:#ff636f>px</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>line-height</span>: <span style=color:#a6be9d>34</span><span style=color:#ff636f>px</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>background</span>: <span style=color:#58a1dd>var</span>(<span style=color:#ff636f>--</span><span style=color:#58a1dd>code</span><span style=color:#ff636f>-</span><span style=color:#58a1dd>bg</span>);
</span></span><span style=display:flex><span>        <span style=color:#ff636f>border-radius</span>: <span style=color:#58a1dd>var</span>(<span style=color:#ff636f>--</span><span style=color:#58a1dd>radius</span>);
</span></span><span style=display:flex><span>        <span style=color:#ff636f>border</span>: <span style=color:#a6be9d>1</span><span style=color:#ff636f>px</span> <span style=color:#ff636f>solid</span> <span style=color:#58a1dd>var</span>(<span style=color:#ff636f>--</span><span style=color:#58a1dd>border</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    .<span style=color:#58a1dd>comment-toggle-buttons</span> <span style=color:#58a1dd>button</span>:<span style=color:#58a1dd>hover</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff636f>background</span>: <span style=color:#58a1dd>var</span>(<span style=color:#ff636f>--</span><span style=color:#58a1dd>border</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    .<span style=color:#58a1dd>comment-toggle-buttons</span> <span style=color:#58a1dd>button</span>.<span style=color:#58a1dd>active</span> {
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>pointer-events</span>: <span style=color:#ff636f>none</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>background-color</span>: <span style=color:#ff636f>transparent</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>&lt;/<span style=color:#58a1dd>style</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#58a1dd>script</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#ff636f>let</span> <span style=color:#58a1dd>telegramLoaded</span> <span style=color:#ff636f>=</span> <span style=color:#ff636f>false</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff636f>function</span> <span style=color:#58a1dd>showGiscus</span>() {
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;show-giscus&#39;</span>).<span style=color:#58a1dd>classList</span>.<span style=color:#58a1dd>add</span>(<span style=color:#a6be9d>&#39;active&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;show-telegram&#39;</span>).<span style=color:#58a1dd>classList</span>.<span style=color:#58a1dd>remove</span>(<span style=color:#a6be9d>&#39;active&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;github-discussions&#39;</span>).<span style=color:#58a1dd>style</span>.<span style=color:#58a1dd>display</span> <span style=color:#ff636f>=</span> <span style=color:#a6be9d>&#39;block&#39;</span>;
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;telegram-comments&#39;</span>).<span style=color:#58a1dd>style</span>.<span style=color:#58a1dd>display</span> <span style=color:#ff636f>=</span> <span style=color:#a6be9d>&#39;none&#39;</span>;
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>setGiscusTheme</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff636f>function</span> <span style=color:#58a1dd>showTelegram</span>() {
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;show-giscus&#39;</span>).<span style=color:#58a1dd>classList</span>.<span style=color:#58a1dd>remove</span>(<span style=color:#a6be9d>&#39;active&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;show-telegram&#39;</span>).<span style=color:#58a1dd>classList</span>.<span style=color:#58a1dd>add</span>(<span style=color:#a6be9d>&#39;active&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;github-discussions&#39;</span>).<span style=color:#58a1dd>style</span>.<span style=color:#58a1dd>display</span> <span style=color:#ff636f>=</span> <span style=color:#a6be9d>&#39;none&#39;</span>;
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>getElementById</span>(<span style=color:#a6be9d>&#39;telegram-comments&#39;</span>).<span style=color:#58a1dd>style</span>.<span style=color:#58a1dd>display</span> <span style=color:#ff636f>=</span> <span style=color:#a6be9d>&#39;block&#39;</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff636f>if</span> (<span style=color:#ff636f>!</span><span style=color:#58a1dd>telegramLoaded</span>) {
</span></span><span style=display:flex><span>            <span style=color:#58a1dd>loadTelegramWidget</span>();
</span></span><span style=display:flex><span>            <span style=color:#58a1dd>telegramLoaded</span> <span style=color:#ff636f>=</span> <span style=color:#ff636f>true</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff636f>const</span> <span style=color:#58a1dd>themeSwitcher</span> <span style=color:#ff636f>=</span> <span style=color:#58a1dd>document</span>.<span style=color:#58a1dd>querySelector</span>(<span style=color:#a6be9d>&#34;#theme-toggle&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff636f>if</span> (<span style=color:#58a1dd>themeSwitcher</span>) {
</span></span><span style=display:flex><span>        <span style=color:#58a1dd>themeSwitcher</span>.<span style=color:#58a1dd>addEventListener</span>(<span style=color:#a6be9d>&#34;click&#34;</span>, () =&gt; {
</span></span><span style=display:flex><span>            <span style=color:#58a1dd>setGiscusTheme</span>();
</span></span><span style=display:flex><span>            <span style=color:#58a1dd>setTelegramTheme</span>();
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>&lt;/<span style=color:#58a1dd>script</span>&gt;
</span></span></code></pre></td></tr></table></div></div><p>大部分的样式都遵循主题的设定，使按钮与主题看上去更和谐统一。</p><p>通过<code>class="active"</code>与<code>display: block</code>、<code>display: none</code>间的切换、隐藏与显示，我们得以用<code>&lt;button></code>控制两个评论区的显示。</p><p>将<code>pointer-events: none</code>应用在当前激活的评论区按钮上，能够使用户无法再次选中，杜绝了很多奇怪bug触发的可能性。</p><h2 id=为什么不是discussion-widget>为什么不是Discussion Widget<a hidden class=anchor aria-hidden=true href=#为什么不是discussion-widget>#</a></h2><p>Telegram除了提供Comments Widget外，还提供了Discussion Widget<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>将频道的评论区接入网页，同样可以作为评论系统，但是它存在着挺多问题：</p><ul><li>博客评论区与频道评论区完全关联</li><li>Telegram无法识别经编辑的链接</li></ul><p>完全关联这一点很好理解，毕竟Discussion Widget就是起到一种“桥接”的作用，将博客与频道绑定起来。如果我发布了技术博文，但我不想将链接广播到我的动画频道，这时的Discussion Widget就无法起到评论系统的作用。</p><p>第二点问题不知是Telegram设计上的问题还是特性，当第一次发送链接时，Telegram能够主动识别；而如果是一条经过编辑的消息，即使它是链接，Telegram也不会识别。</p><p>这样的特性不仅为Discussion Widget带来不便，还在广告投放者手中“被妙用”：他们往往会先在群组中发送一条正常的消息，随后将消息编辑为广告文案，以此躲过反广告机器人的识别与检测。</p><p>总体而言，Discussion Widget并不是一套完善、高度可用的评论系统，它更适用于日常社交与个人Telegram频道相关性强的用户，否则，Discussion Widget并没有与Waline一较高下的实力。</p><p>如果像我一样已经有一个公开频道，此时接入Discussion Widget将会非常不便，需要为旧博文手动关联评论区，影响频道的内容展示；而如果没有公开频道，创建并使用Discussion Widget也未尝不可。</p><h2 id=或许是waline>或许是Waline<a hidden class=anchor aria-hidden=true href=#或许是waline>#</a></h2><p>在第二个评论系统的选择上，我也有短暂考虑过Waline<sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup>，它被广泛使用、口碑良好且没有广告，给我的第一印象不错。</p><p>唯一的问题就是，它需要部署。虽说Waline也可以免费部署到Vercel<sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup>，但是我个人还是倾向于使用一些现成的服务，例如Giscus的使用Github Discussion，Comments Widget的接入Telegram。</p><p>使用额外部署的评论系统、调用一套第三方服务，就像引入新的外部依赖，它不一定会让博客变得不稳定，但是会让我感到复杂、不安定。相比之下，使用Comments Widget，将评论系统接入日常使用的社交软件，给我的感觉更合理、更无缝。</p><p>但是结论不能没有余地，当有需要再次添加评论系统，或是博客重构的时候，Waline（或是它的继任者）会是一个好选择。</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://giscus.app/>giscus</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://t.me/XeonAnimeLog>Xeon的Anime观察日志</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=https://comments.app/>Comments for websites</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href=https://core.telegram.org/widgets/discussion>Discussion Widget</a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p><a href=https://waline.js.org/>Waline | Waline</a>&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:6><p><a href=https://vercel.com/home>Vercel: Build and deploy the best web experiences with the Frontend Cloud</a>&#160;<a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><div class=post-taxonomies><ul class=post-tags><li><a href=https://xeonzilla.github.io/tags/tech/>技术</a></li><li><a href=https://xeonzilla.github.io/tags/hugo/>Hugo</a></li></ul><ul class=post-series></ul></div><nav class=paginav><a class=next href=https://xeonzilla.github.io/post/roshidere/><span class=title>下一页 »</span><br><span>不时轻声地以俄语遮羞的邻座艾莉同学</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Comments Widget的自动主题和双评论系统 on x" href="https://x.com/intent/tweet/?text=Comments%20Widget%e7%9a%84%e8%87%aa%e5%8a%a8%e4%b8%bb%e9%a2%98%e5%92%8c%e5%8f%8c%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f&amp;url=https%3a%2f%2fxeonzilla.github.io%2fpost%2fauto_theme_comments_system_with_comments_widget%2f&amp;hashtags=%e6%8a%80%e6%9c%af%2cHugo"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Comments Widget的自动主题和双评论系统 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fxeonzilla.github.io%2fpost%2fauto_theme_comments_system_with_comments_widget%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Comments Widget的自动主题和双评论系统 on whatsapp" href="https://api.whatsapp.com/send?text=Comments%20Widget%e7%9a%84%e8%87%aa%e5%8a%a8%e4%b8%bb%e9%a2%98%e5%92%8c%e5%8f%8c%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f%20-%20https%3a%2f%2fxeonzilla.github.io%2fpost%2fauto_theme_comments_system_with_comments_widget%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Comments Widget的自动主题和双评论系统 on telegram" href="https://telegram.me/share/url?text=Comments%20Widget%e7%9a%84%e8%87%aa%e5%8a%a8%e4%b8%bb%e9%a2%98%e5%92%8c%e5%8f%8c%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f&amp;url=https%3a%2f%2fxeonzilla.github.io%2fpost%2fauto_theme_comments_system_with_comments_widget%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li></ul></footer><div class=comment-toggle-buttons><button id=show-giscus class=active onclick=showGiscus()>Github Discussions</button>
<button id=show-telegram onclick=showTelegram()>Telegram Comments</button></div><div id=github-discussions class=comment-box></div><div id=telegram-comments class=comment-box></div><style>.comment-toggle-buttons{display:flex;justify-content:center;margin-top:50px;margin-bottom:10px;gap:10px}#telegram-comments{min-height:378.2px;display:none}.comment-toggle-buttons button{display:block;padding:0 14px;color:var(--primary);font-size:14px;line-height:34px;background:var(--code-bg);border-radius:var(--radius);border:1px solid var(--border)}.comment-toggle-buttons button:hover{background:var(--border)}.comment-toggle-buttons button.active{pointer-events:none;background-color:transparent}</style><script>let telegramLoaded=!1;function showGiscus(){document.getElementById("show-giscus").classList.add("active"),document.getElementById("show-telegram").classList.remove("active"),document.getElementById("github-discussions").style.display="block",document.getElementById("telegram-comments").style.display="none",setGiscusTheme()}function showTelegram(){document.getElementById("show-giscus").classList.remove("active"),document.getElementById("show-telegram").classList.add("active"),document.getElementById("github-discussions").style.display="none",document.getElementById("telegram-comments").style.display="block",telegramLoaded||(loadTelegramWidget(),telegramLoaded=!0)}const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()==="dark"?"noborder_dark":"noborder_light"}})},loadTelegramWidget=()=>{const t=document.getElementById("telegram-comments");t.innerHTML="";const e=document.createElement("script");e.src="https://comments.app/js/widget.js?3",e.defer=!0,e.setAttribute("data-comments-app-website","i7gjmkOw"),e.setAttribute("data-limit","100"),e.setAttribute("data-height","371"),e.setAttribute("data-dislikes","1"),e.setAttribute("data-colorful","1"),e.setAttribute("data-dark",getStoredTheme()==="dark"?"1":"0"),t.appendChild(e)},setTelegramTheme=()=>{loadTelegramWidget()};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"Xeonzilla/Xeonzilla.github.io","data-repo-id":"R_kgDOL6BvNQ","data-category":"Announcements","data-category-id":"DIC_kwDOL6BvNc4Cfb8m","data-mapping":"pathname","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":getStoredTheme()==="dark"?"noborder_dark":"noborder_light","data-lang":"zh-CN",crossorigin:"anonymous"},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),e.defer=!0,document.querySelector("#github-discussions").appendChild(e),document.getElementById("telegram-comments").style.display==="block"&&(loadTelegramWidget(),telegramLoaded=!0);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",()=>{setGiscusTheme(),setTelegramTheme()})})</script></article></main><footer class=footer><span>&copy; 2024 <a href=https://xeonzilla.github.io/>Xeonzilla's Note</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><footer class=footer><p class=footer__license xmlns:cc=http://creativecommons.org/ns#>本作品根据
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans target=_blank rel="license noopener noreferrer">CC BY-NC-SA 4.0</a>
<img class=footer__img src=https://mirrors.creativecommons.org/presskit/icons/cc.svg alt="Creative Commons">
<img class=footer__img src=https://mirrors.creativecommons.org/presskit/icons/by.svg alt=BY>
<img class=footer__img src=https://mirrors.creativecommons.org/presskit/icons/nc.svg alt=NC>
<img class=footer__img src=https://mirrors.creativecommons.org/presskit/icons/sa.svg alt=SA>
许可</p></footer><style>.footer{margin-top:0;padding-top:0}.footer__license{margin-top:-15px}.footer__img{height:22px;margin-left:3px;vertical-align:-25%;display:inline-block}</style><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>