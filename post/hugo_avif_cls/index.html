<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Hugoä¸­çš„AVIFä¸ç´¯ç§¯å¸ƒå±€åç§»ï¼ˆCLSï¼‰ | Xeonzilla's Note</title>
<meta name=keywords content="æŠ€æœ¯,Hugo"><meta name=description content="CLSçš„ä¼ªè§£å†³æ–¹æ¡ˆ ä½•è°“CLS Googleçš„PageSpeed InsightsæŠ¥å‘Šä¸­å±•ç¤ºäº†å››å¤§ç»´åº¦çš„æŒ‡æ ‡ï¼šFCPã€LCPã€TBTã€CLSã€‚å…¶ä¸­"><meta name=author content="Xeonzilla"><link rel=canonical href=https://xeonzilla.github.io/post/hugo_avif_cls/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://xeonzilla.github.io/assets/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://xeonzilla.github.io/assets/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://xeonzilla.github.io/assets/favicon-32x32.png><link rel=apple-touch-icon href=https://xeonzilla.github.io/assets/apple-touch-icon.png><link rel=mask-icon href=https://xeonzilla.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://xeonzilla.github.io/post/hugo_avif_cls/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Hugoä¸­çš„AVIFä¸ç´¯ç§¯å¸ƒå±€åç§»ï¼ˆCLSï¼‰"><meta property="og:description" content="CLSçš„ä¼ªè§£å†³æ–¹æ¡ˆ ä½•è°“CLS Googleçš„PageSpeed InsightsæŠ¥å‘Šä¸­å±•ç¤ºäº†å››å¤§ç»´åº¦çš„æŒ‡æ ‡ï¼šFCPã€LCPã€TBTã€CLSã€‚å…¶ä¸­"><meta property="og:type" content="article"><meta property="og:url" content="https://xeonzilla.github.io/post/hugo_avif_cls/"><meta property="og:image" content="https://xeonzilla.github.io/404.html"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-07-31T13:58:00+08:00"><meta property="article:modified_time" content="2024-08-14T22:39:00+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://xeonzilla.github.io/404.html"><meta name=twitter:title content="Hugoä¸­çš„AVIFä¸ç´¯ç§¯å¸ƒå±€åç§»ï¼ˆCLSï¼‰"><meta name=twitter:description content="CLSçš„ä¼ªè§£å†³æ–¹æ¡ˆ ä½•è°“CLS Googleçš„PageSpeed InsightsæŠ¥å‘Šä¸­å±•ç¤ºäº†å››å¤§ç»´åº¦çš„æŒ‡æ ‡ï¼šFCPã€LCPã€TBTã€CLSã€‚å…¶ä¸­"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"å½’æ¡£","item":"https://xeonzilla.github.io/post/"},{"@type":"ListItem","position":2,"name":"Hugoä¸­çš„AVIFä¸ç´¯ç§¯å¸ƒå±€åç§»ï¼ˆCLSï¼‰","item":"https://xeonzilla.github.io/post/hugo_avif_cls/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hugoä¸­çš„AVIFä¸ç´¯ç§¯å¸ƒå±€åç§»ï¼ˆCLSï¼‰","name":"Hugoä¸­çš„AVIFä¸ç´¯ç§¯å¸ƒå±€åç§»ï¼ˆCLSï¼‰","description":"CLSçš„ä¼ªè§£å†³æ–¹æ¡ˆ ä½•è°“CLS Googleçš„PageSpeed InsightsæŠ¥å‘Šä¸­å±•ç¤ºäº†å››å¤§ç»´åº¦çš„æŒ‡æ ‡ï¼šFCPã€LCPã€TBTã€CLSã€‚å…¶ä¸­","keywords":["æŠ€æœ¯","Hugo"],"articleBody":"CLSçš„ä¼ªè§£å†³æ–¹æ¡ˆ ä½•è°“CLS Googleçš„PageSpeed InsightsæŠ¥å‘Šä¸­å±•ç¤ºäº†å››å¤§ç»´åº¦çš„æŒ‡æ ‡ï¼šFCPã€LCPã€TBTã€CLSã€‚å…¶ä¸­ï¼ŒCLSæ˜¯æŒ‡Cumulative Layout Shiftï¼Œå³ç´¯ç§¯å¸ƒå±€åç§»ã€‚\nCumulative Layout Shift (CLS) æ˜¯ä¸€é¡¹ç¨³å®šçš„ Core Web Vitals æŒ‡æ ‡ã€‚å®ƒæ˜¯ä¸€é¡¹ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„é‡è¦æŒ‡æ ‡ï¼Œç”¨äºè¡¡é‡è§†è§‰ç¨³å®šæ€§ï¼Œå› ä¸ºå®ƒæœ‰åŠ©äºé‡åŒ–ç”¨æˆ·é‡åˆ°æ„å¤–å¸ƒå±€åç§»çš„é¢‘ç‡ï¼Œè€Œè¾ƒä½çš„ CLS æœ‰åŠ©äºç¡®ä¿ç½‘é¡µå¸¦æ¥æ„‰æ‚¦çš„ä½“éªŒã€‚\næ„å¤–çš„å¸ƒå±€åç§»å¯èƒ½ä¼šåœ¨å¾ˆå¤šæ–¹é¢å½±å“ç”¨æˆ·ä½“éªŒï¼Œä¾‹å¦‚ï¼Œå¦‚æœæ–‡æœ¬çªç„¶ç§»åŠ¨ï¼Œå¯¼è‡´ç”¨æˆ·åœ¨é˜…è¯»æ—¶å¤±å»ä½ç½®ï¼Œæˆ–è®©ç”¨æˆ·ç‚¹å‡»é”™è¯¯çš„é“¾æ¥æˆ–æŒ‰é’®ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½ä¼šé€ æˆä¸¥é‡æŸå®³ã€‚\nå½“ä»¥å¼‚æ­¥æ–¹å¼åŠ è½½èµ„æºï¼Œæˆ–å°† DOM å…ƒç´ åŠ¨æ€æ·»åŠ åˆ°ç½‘é¡µä¸­çš„ç°æœ‰å†…å®¹ä¹‹å‰æ—¶ï¼Œé€šå¸¸ä¼šå‘ç”Ÿç½‘é¡µå†…å®¹æ„å¤–ç§»åŠ¨ã€‚å¯¼è‡´å¸ƒå±€åç§»çš„åŸå› å¯èƒ½åŒ…æ‹¬å°ºå¯¸æœªçŸ¥çš„å›¾ç‰‡æˆ–è§†é¢‘ã€å‘ˆç°çš„å­—ä½“å¤§äºæˆ–å°äºå…¶åˆå§‹åå¤‡å°ºå¯¸ï¼Œæˆ–è€…æ˜¯ä¼šè‡ªè¡ŒåŠ¨æ€è°ƒæ•´å¤§å°çš„ç¬¬ä¸‰æ–¹å¹¿å‘Šæˆ–å¾®ä»¶ã€‚\nç®€å•æ¥è¯´ï¼ŒCLSæ˜¯ç½‘ç«™è®¾è®¡æ—¶åº”è¯¥é¿å…çš„é—®é¢˜ã€‚åœ¨Hugoä¸­ï¼Œä¸€èˆ¬éœ€è¦åˆ©ç”¨åˆ©ç”¨å“åº”å¼å›¾ç‰‡ï¼ˆResponsive imagesï¼‰ã€é¡µé¢æŸï¼ˆPage bundlesï¼‰ã€å›¾åƒæ¸²æŸ“æŒ‚é’©ï¼ˆImage render hooksï¼‰å’Œå›¾åƒå¤„ç†ï¼ˆImage processingï¼‰ç­‰å·¥å…·æˆ–å¤„ç†æ–¹æ³•ã€‚\nåœ¨æˆ‘çš„â€œä¼ªè§£å†³æ–¹æ¡ˆâ€ä¸­ï¼Œä¸»è¦å€ŸåŠ©äº†HTMLå’ŒCSSçš„ç‰¹æ€§ï¼Œä¸ä¾èµ–äºHugoçš„å›¾åƒå¤„ç†ã€‚\næ–¹æ¡ˆå±•ç¤º render-image.html é¦–å…ˆéœ€è¦åœ¨Hugoç«™ç‚¹ç›®å½•layouts/_default/_markupè·¯å¾„ä¸‹ï¼Œåˆ›å»ºåä¸ºrender-image.htmlçš„æ–‡ä»¶ï¼Œå®ƒè´Ÿè´£Hugoå¯¹å›¾åƒçš„æ¸²æŸ“ã€‚\næˆ‘æ‰€ä½¿ç”¨çš„render-image.htmlä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 \u003cstyle\u003e .container { display: flex; justify-content: center; align-items: center; width: 100%; max-width: 720px; aspect-ratio: 16/9; position: relative; background-color: rgba(0, 0, 0, 0); } .container img { max-width: 100%; height: auto; display: block; } \u003c/style\u003e \u003cdiv class=\"container\"\u003e \u003cimg onload=\"resizeContainer(this)\" loading=\"lazy\" src=\"{{ .Destination | safeURL }}\" alt=\"{{ .Text }}\" {{with.Title}} title=\"{{ . }}\" {{end}} /\u003e \u003c/div\u003e \u003cscript\u003e function resizeContainer(img) { const container = img.parentElement; const aspectRatio = img.naturalHeight / img.naturalWidth; container.style.height = `${container.clientWidth * aspectRatio}px`; } \u003c/script\u003e å…¶ä¸­ï¼Œmax-width: 720px; aspect-ratio: 16/9;æ˜¯æ ¹æ®æ‰€ä½¿ç”¨çš„ä¸»é¢˜æ–‡ç« å†…å›¾ç‰‡å¤§å°è€Œè®¾å®šçš„å€¼ï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼Œæˆ‘æ‰€ä½¿ç”¨çš„PaperModä¸»é¢˜åœ¨æ–‡ç« å†…å›¾ç‰‡å°ºå¯¸ä¸º720px*405pxã€‚\ncover.html æ¥ä¸‹æ¥ä»¥PaperModä¸ºä¾‹ï¼Œå› ä¸ºHugoå„ä¸ªä¸»é¢˜ä¹‹é—´çš„ç»“æ„å¯èƒ½ç•¥æœ‰ä¸åŒï¼Œä¿®æ”¹å‰åº”å½“è‡ªè¡Œè°ƒæ•´ã€‚åœ¨themes/PaperMod/layouts/partialsä¸‹å¤åˆ¶ä¸€ä»½cover.htmlï¼Œç²˜è´´åˆ°layouts/partialsä¸‹ã€‚PaperModæä¾›çš„æœ‰å…³å°é¢æ˜¾ç¤ºçš„ä»£ç ä¸ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 {{- if (and (in $processableFormats $cover.MediaType.SubType) ($responsiveImages) (eq $prod true)) }} \u003cimg loading=\"{{$loading}}\" srcset=\"{{- range $size := $sizes -}} {{- if (ge $cover.Width $size) -}} {{ printf \"%s %s\" (($cover.Resize (printf \"%sx\" $size)).Permalink) (printf \"%sw ,\" $size) -}} {{ end }} {{- end -}}{{$cover.Permalink }} {{printf \"%dw\" ($cover.Width)}}\" sizes=\"(min-width: 768px) 720px, 100vw\" src=\"{{ $cover.Permalink }}\" alt=\"{{ $alt }}\" width=\"{{ $cover.Width }}\" height=\"{{ $cover.Height }}\"\u003e {{- else }}{{/* Unprocessable image or responsive images disabled */}} \u003cimg loading=\"{{$loading}}\" src=\"{{ (path.Join .RelPermalink .Params.cover.image) | absURL }}\" alt=\"{{ $alt }}\"\u003e {{- end }} {{- else }}{{/* For absolute urls and external links, no img processing here */}} {{- if $addLink }}\u003ca href=\"{{ (.Params.cover.image) | absURL }}\" target=\"_blank\" rel=\"noopener noreferrer\"\u003e{{ end -}} \u003cimg loading=\"{{$loading}}\" src=\"{{ (.Params.cover.image) | absURL }}\" alt=\"{{ $alt }}\"\u003e {{- end }} ä»¿ç…§ä¸Šé¢çš„render-image.htmlï¼Œå°†å…¶ä¿®æ”¹ä¸ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 {{- if (and (in $processableFormats $cover.MediaType.SubType) ($responsiveImages) (eq $prod true)) }} \u003cimg loading=\"{{$loading}}\" srcset=\"{{- range $size := $sizes -}} {{- if (ge $cover.Width $size) -}} {{ printf \"%s %s\" (($cover.Resize (printf \"%sx\" $size)).Permalink) (printf \"%sw ,\" $size) -}} {{ end }} {{- end -}}{{$cover.Permalink }} {{printf \"%dw\" ($cover.Width)}}\" sizes=\"(min-width: 768px) 720px, 100vw\" src=\"{{ $cover.Permalink }}\" alt=\"{{ $alt }}\" width=\"{{ $cover.Width }}\" height=\"{{ $cover.Height }}\"\u003e {{- else }}{{/* Unprocessable image or responsive images disabled */}} \u003cstyle\u003e .container { display: flex; justify-content: center; align-items: center; width: 100%; max-width: 670.4px; aspect-ratio: 16/9; position: relative; background-color: rgba(0, 0, 0, 0); } .container img { max-width: 100%; height: auto; display: block; } \u003c/style\u003e \u003cdiv class=\"container\"\u003e \u003cimg onload=\"resizeContainer(this)\" loading=\"{{$loading}}\" src=\"{{ (path.Join .RelPermalink .Params.cover.image) | absURL }}\" alt=\"{{ $alt }}\"\u003e \u003c/div\u003e \u003cscript\u003e function resizeContainer(img) { const container = img.parentElement; const aspectRatio = img.naturalHeight / img.naturalWidth; container.style.height = `${container.clientWidth * aspectRatio}px`; } \u003c/script\u003e {{- end }} {{- else }}{{/* For absolute urls and external links, no img processing here */}} {{- if $addLink }}\u003ca href=\"{{ (.Params.cover.image) | absURL }}\" target=\"_blank\" rel=\"noopener noreferrer\"\u003e{{ end -}} \u003cstyle\u003e .container { display: flex; justify-content: center; align-items: center; width: 100%; max-width: 670.4px; aspect-ratio: 16/9; position: relative; background-color: rgba(0, 0, 0, 0); } .container img { max-width: 100%; height: auto; display: block; } \u003c/style\u003e \u003cdiv class=\"container\"\u003e \u003cimg onload=\"resizeContainer(this)\" loading=\"{{$loading}}\" src=\"{{ (.Params.cover.image) | absURL }}\" alt=\"{{ $alt }}\"\u003e \u003c/div\u003e \u003cscript\u003e function resizeContainer(img) { const container = img.parentElement; const aspectRatio = img.naturalHeight / img.naturalWidth; container.style.height = `${container.clientWidth * aspectRatio}px`; } \u003c/script\u003e {- end }} åŒä¸Šé¢ä¸€æ ·ï¼Œmax-width: 670.4px; aspect-ratio: 16/9;æ˜¯æ ¹æ®æ‰€ä½¿ç”¨çš„ä¸»é¢˜å°é¢å›¾ç‰‡å¤§å°è€Œè®¾å®šçš„å€¼ï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼Œæˆ‘æ‰€ä½¿ç”¨çš„PaperModä¸»é¢˜å°é¢å›¾ç‰‡å°ºå¯¸ä¸º670.4px*377.1pxã€‚\nå¯ä»¥çœ‹åˆ°ï¼ŒPaperModæä¾›çš„æœ‰å…³å°é¢æ˜¾ç¤ºçš„ä»£ç æä¾›äº†3æ®µHTMLï¼Œä½†æ˜¯æˆ‘åªä¿®æ”¹äº†åé¢ä¸¤æ®µï¼Œè¿™æ˜¯å› ä¸ºç¬¬1æ®µHTMLéœ€è¦params.cover.responsiveImages = trueè§¦å‘ï¼Œè€Œæˆ‘å…³é—­äº†å“åº”å¼å›¾ç‰‡ï¼Œæ‰€ä»¥æ— éœ€ä¿®æ”¹ã€‚\ninner_cover.htmlä¸single.html åœ¨ä¸Šé¢çš„cover.htmlä¸­ï¼Œæˆ‘ä»¬ç»™å®šäº†max-width: 670.4pxï¼Œè¿™å¸®åŠ©æˆ‘ä»¬è§„å®šå°é¢çš„å¤§å°ã€‚ç„¶è€Œï¼ŒPaperModä¸»é¢˜åœ¨ä¸»é¡µçš„å°é¢å’Œåœ¨æ–‡ç« å†…çš„å°é¢å¤§å°åˆæœ‰ä¸åŒï¼Œåœ¨æ–‡ç« è¯¦æƒ…é¡µï¼Œå°é¢çš„å¤§å°ä¸º720px*405pxï¼ŒåŒæ–‡ç« å†…å›¾ç‰‡å¤§å°ä¸€æ ·ã€‚\nä¸ºäº†ä¿æŒå†…å¤–å°é¢çš„å°ºå¯¸ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸¤å¤„å°é¢çš„æœ‰å…³ä»£ç è§£è€¦ã€‚å¤åˆ¶ä¸€ä»½cover.htmlå¹¶å°†å…¶é‡å‘½åï¼Œä¸ºäº†ä¾¿äºè¾¨è®¤ï¼Œæˆ‘å°†å…¶å‘½åä¸ºinner_cover.html,æ„ä¸ºâ€œå†…éƒ¨çš„å°é¢â€ï¼Œåœ¨inner_cover.htmlä¸­ï¼Œè®¾ç½®max-width: 720pxã€‚\næ¥ç€ï¼Œå»åˆ°æ‰€ç”¨ä¸»é¢˜è·¯å¾„ä¸‹çš„layouts/_defaultï¼Œå¤åˆ¶å…¶ä¸­çš„single.htmlè‡³ç«™ç‚¹ç›®å½•ä¸‹çš„layouts/_defaultã€‚PaperModä¸»é¢˜æ‰€æä¾›çš„single.htmlæœ‰å…³å°é¢æ¸²æŸ“çš„ä»£ç ä¸º{{- partial \"cover.html\" (dict \"cxt\" . \"IsSingle\" true \"isHidden\" $isHidden) }}ï¼Œå°†cover.htmlæ›¿æ¢ä¸ºinner_cover.htmlï¼Œè‡³æ­¤ï¼ŒHugoåœ¨æ¸²æŸ“æ–‡ç« æ—¶ï¼Œä¼šå°†inner_cover.htmlçš„è®¾å®šåº”ç”¨åˆ°æ–‡ç« è¯¦æƒ…é¡µå°é¢ã€‚\nä¸Šé¢çš„è§£è€¦æ“ä½œå‚è€ƒäº†Hugoåšå®¢æ–‡ç« å°é¢å›¾ç‰‡ç¼©å°å¹¶ç§»åˆ°ä¾§è¾¹ | PaperModä¸»é¢˜ | Sulvâ€™s Blog,ç›¸å…³æ“ä½œä¹Ÿå¯å‚é˜…è¿™ç¯‡æ–‡ç« ã€‚è¿™ç¯‡æ–‡ç« æåˆ°\næŠŠcover1.htmlæ–‡ä»¶é‡Œçš„ä¿®æ”¹ä¸º\nä½†æ˜¯ï¼Œåœ¨æˆ‘è¿›è¡Œäº†å¦‚ä¸Šæ“ä½œåï¼Œæ–‡ç« å†…å°é¢çš„åœ†è§’æ¶ˆå¤±ï¼Œä¼¼ä¹è¿™ä¸ªæ“ä½œå½±å“æ–‡ç« å†…å°é¢çš„æ ·å¼ã€‚æœ¬ç€â€œå¦‚æ— å¿…è¦ï¼Œå‹¿å¢å®ä½“â€çš„å¥¥å¡å§†å‰ƒåˆ€ç²¾ç¥ï¼Œæˆ‘é€‰æ‹©ä¸è¿›è¡Œä¿®æ”¹ã€‚ç»å¿«é€Ÿæµ‹è¯•ï¼Œä¸è¿›è¡Œå¦‚ä¸Šæ“ä½œå¹¶æœªå¸¦æ¥å¯è§çš„è´Ÿé¢æ•ˆæœã€‚\næ­¤å¤–ï¼Œåœ¨è¿›è¡Œè§£è€¦å‰ï¼Œå¦‚æœæ–‡ç« åŒæ—¶å­˜åœ¨å°é¢å’Œæ’å›¾ï¼Œé‚£ä¹ˆæ–‡ç« å†…å°é¢çš„å°ºå¯¸ä¸å›¾ç‰‡ä¸€è‡´ï¼›æ–‡ç« åªå­˜åœ¨å°é¢è€Œæ— æ’å›¾ï¼Œåˆ™æ–‡ç« å†…å°é¢å°ºå¯¸ä¸ä¸»é¡µå°é¢ä¸€è‡´ã€‚è¿™ç§æƒ…å†µåº”è¯¥æ˜¯æŸå¤„ä»£ç è°ƒç”¨å¯¼è‡´çš„ï¼Œä¸ä¸€å®šæ˜¯bugã€‚\nç»†èŠ‚è¯´æ˜ CSS æ–¹æ¡ˆä¸­çš„CSSéƒ¨åˆ†é™¤å¸¸è§„çš„æ ·å¼è°ƒæ•´å¤–ï¼Œè¿˜æœ‰å ä½ä½œç”¨ï¼Œæ˜¯æœ¬æ–¹æ¡ˆçš„æ ¸å¿ƒã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 \u003cstyle\u003e .container { display: flex; justify-content: center; align-items: center; width: 100%; max-width: 720px; aspect-ratio: 16/9; position: relative; background-color: rgba(0, 0, 0, 0); } .container img { max-width: 100%; height: auto; display: block; } \u003c/style\u003e å…¶ä¸­ï¼Œwidth: 100%; max-width: 720px; aspect-ratio: 16/9;æ˜¯èµ·å ä½ä½œç”¨çš„å…³é”®ï¼šå°†è®¾ç½®ä¸ºæœ‰æœ€å¤§å®½åº¦ï¼Œä¸”æ¯”ä¾‹å›ºå®šçš„å®¹å™¨ã€‚è¿™æ ·ï¼Œä¾¿èƒ½åœ¨å›¾ç‰‡åŠ è½½å‰é¢„ç•™ä¸€å®šçš„ç©ºé—´ã€‚\nåœ¨å‰å‡ ç‰ˆçš„ä»£ç ä¸­ï¼Œæœ‰è¿‡è®¾ç½®å›ºå®šwidthæˆ–heightçš„å°è¯•ï¼Œä½†æ˜¯å›ºå®šå¤§å°ä¼šä½¿ä¸åŒå®¢æˆ·ç«¯çš„å›¾ç‰‡å°ºå¯¸æ˜¾ç¤ºä¸€è‡´ï¼Œå¯¼è‡´ç§»åŠ¨ç«¯çš„æ’ç‰ˆå¼‚å¸¸ã€‚ä½¿ç”¨â€œæœ€å¤§â€å’Œâ€œæœ€å°â€æ¥è§„å®šå¤§å°ï¼Œä½¿å¾—å®¹å™¨èƒ½å¤Ÿé€‚åº”ä¸åŒå®¢æˆ·ç«¯çš„æ’ç‰ˆã€‚\nè®¾ç½®aspect-ratioæ˜¯ä»¥é—´æ¥çš„æ–¹æ³•é€šè¿‡å®¹å™¨å®½åº¦å¾—åˆ°å®¹å™¨é«˜åº¦ï¼Œä¸èƒ½é€šè¿‡å›ºå®šæ•°å€¼è®¾ç½®çš„åŸå› åŒä¸Šï¼›åŒæ—¶ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨max-heightã€min-heightæ¥è®¾ç½®é«˜åº¦ï¼Œå®ƒä»¬åŒæ ·å¯èƒ½å¯¼è‡´æ’ç‰ˆå¼‚å¸¸ï¼Œè€Œä¸”ä½œä¸ºæœ€å¤§å€¼ä¸æœ€å°å€¼ï¼Œå®ƒä»¬åªèƒ½è§„å®šé«˜åº¦çš„èŒƒå›´ï¼Œä¸èƒ½èµ·å›ºå®šæ•°å€¼çš„å ä½ä½œç”¨ã€‚aspect-ratioèƒ½åœ¨æš‚æ—¶ä¸è®¾ç½®é«˜åº¦çš„æƒ…å†µä¸‹å›ºå®šå®¹å™¨é«˜åº¦ï¼Œä»¥å¾—åˆ°ä¸€ä¸ªæœ‰å¤§å°çš„ã€‚\ndisplay: flex; justify-content: center; align-items: center;èµ·å±…ä¸­ä½œç”¨ï¼Œå±…ä¸­ä¸ä»…å¯ä»¥é¿å…è®¸å¤šæ„å¤–çš„æ’ç‰ˆé”™è¯¯ï¼Œè¿˜èƒ½ä½¿å›¾åƒçš„æ›¿ä»£æ–‡å­—ï¼ˆaltå±æ€§ï¼‰å±…ä¸­ï¼Œæ›´åŠ ç¾è§‚ã€‚\nå®¹å™¨çš„èƒŒæ™¯é¢œè‰²ä½¿ç”¨background-color: rgba(0, 0, 0, 0);è®¾ç½®ä¸ºé€æ˜ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå…¶å®ƒé¢œè‰²ï¼Œæˆ–è€…æ˜¾ç¤ºè‡ªå®šä¹‰çš„CSSæ ·å¼å’Œå›¾ç‰‡ã€‚å»ºè®®è®¾ç½®æ—¶è¾…ä»¥border-radiusï¼Œé¿å…èƒŒæ™¯åœ†è§’ä¸ä¸Šå±‚å›¾ç‰‡ä¸åŒ¹é…ï¼Œå¯¼è‡´èƒŒæ™¯éœ²å‡ºï¼›æˆ–è€…ä½¿ç”¨JavaScriptï¼Œåœ¨å›¾ç‰‡åŠ è½½åéšè—å®¹å™¨èƒŒæ™¯ã€‚\nJavaScript æ–¹æ¡ˆä¸­ä½¿ç”¨çš„JavaScriptåŠŸèƒ½ä¸ºè®¡ç®—å®¹å™¨çš„é«˜åº¦ï¼Œä½¿å…¶ä¸å›¾ç‰‡é«˜åº¦ä¸€è‡´ã€‚\n1 2 3 4 5 6 7 \u003cscript\u003e function resizeContainer(img) { const container = img.parentElement; const aspectRatio = img.naturalHeight / img.naturalWidth; container.style.height = `${container.clientWidth * aspectRatio}px`; } \u003c/script\u003e å¦‚æœèƒ½å¤Ÿæ¥å—è¶…å®½å›¾ç‰‡å¸¦æ¥çš„ä¸Šä¸‹ç©ºé—´ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±ä¸æ˜¯å¿…è¦çš„ã€‚åˆ é™¤è¿™æ®µJavaScriptåï¼Œåœ¨æ˜¾ç¤ºè¶…å®½å›¾ç‰‡æ—¶ï¼Œä¼šå‡ºç°ç±»ä¼¼â€œä»¥16:9çš„å±å¹•æ’­æ”¾21:9çš„è§†é¢‘â€é€ æˆçš„ä¸Šä¸‹ç©ºä½™ï¼›ç„¶è€Œï¼Œåœ¨æ˜¾ç¤ºè¶…é«˜å›¾ç‰‡æ—¶ï¼Œç”±äºaspect-ratioçš„éå¼ºåˆ¶æ€§ï¼Œå›¾ç‰‡å’Œå®¹å™¨å‡ä¼šæ­£å¸¸æ˜¾ç¤ºï¼Œæ˜¾ç¤ºæƒ…å†µä¸ä¸‹å›¾ä¸€è‡´ã€‚\nå‡½æ•°ä¸­é€šè¿‡æ¯”ä¾‹é—´æ¥è®¡ç®—æ‰€éœ€é«˜åº¦ï¼Œè¿™ä¼šåœ¨æŸäº›è¿‡äºå¤æ‚çš„æƒ…å†µä¸‹å¼•å…¥ç»†å¾®ä¸å¯è§çš„è¯¯å·®ã€‚ä½†æ˜¯ç›´æ¥é€šè¿‡å›¾ç‰‡é«˜åº¦èµ‹å€¼å®¹å™¨é«˜åº¦ï¼Œä¼šå‡ºç°è¾ƒå¤§ç¨‹åº¦çš„åå·®ï¼Œæ‰€å¾—é«˜åº¦å€¼è¿œè¶…å›¾ç‰‡å®é™…é«˜åº¦ï¼Œæ‰€ä»¥é—´æ¥è®¡ç®—åœ¨è¿™ä¸ªæƒ…å†µä¸‹æ˜¯ä¼˜è§£ã€‚\nAVIFå›°å¢ƒ Hugoä¸­çš„AVIF ä¸Šé¢èŠ±äº†ä¸å°‘æ—¶é—´ï¼Œå¾—åˆ°äº†ä¸€ä¸ªâ€œä¼ªè§£å†³æ–¹æ¡ˆâ€ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¦ä¼ªè§£å†³è€Œä¸èƒ½çœŸæ­£è§£å†³å‘¢ï¼Ÿ\nå®é™…ä¸Šï¼Œæœ‰å…³Hugoçš„CLSé—®é¢˜ï¼Œå‰äººæä¾›äº†å¾ˆå¤šè§£å†³æ–¹æ¡ˆï¼Œä¾‹å¦‚ï¼š\nä¿®å¤ Hugo æœ¬åœ°å›¾ç‰‡çš„ç´¯è®¡å¸ƒå±€åç§»ï¼ˆCLSï¼‰é—®é¢˜ - Dvelâ€™s Blog ä½¿ç”¨Hugoå®ç°å“åº”å¼å’Œä¼˜åŒ–çš„å›¾ç‰‡ | æµåŠ¨ Hugo å›¾ç‰‡æ‡’åŠ è½½å’Œè‡ªé€‚åº” CSS å›¾ç‰‡å ä½ | DSRBLOG è¿™äº›æ–¹æ¡ˆæˆ‘éƒ½ä¸€ä¸€å°è¯•ï¼Œä½†æ˜¯æ— ä¸€ä¾‹å¤–ï¼Œéƒ½ä¼šé‡åˆ°å½¢å¦‚execute of template failed at \u003c$img.Width\u003e: error calling Width: this method is only available for image resourcesçš„é”™è¯¯ã€‚\nä¸€å¼€å§‹æˆ‘ä»¥ä¸ºæ˜¯ç«™ç‚¹ç»“æ„ã€å‡½æ•°å‚æ•°ä¹‹ç±»çš„ä»£ç é”™è¯¯ï¼Œä¸€ç•ªç¢°å£å¿ƒç°æ„å†·åï¼Œåœ¨æ— æ„é—´æœç´¢â€Hugo AVIFâ€œæ—¶ï¼Œæ‰å¾—åˆ°ç­”æ¡ˆï¼šHugoå¹¶ä¸æ”¯æŒå¤„ç†AVIFã€‚\nHugoçš„Githubä»“åº“ä¸­æœ‰ä¸€ä¸ª2020å¹´åˆ›å»ºçš„Issueï¼šAdd image processing support for AVIF Â· Issue #7837 Â· gohugoio/hugoï¼Œå…¶ä¸­å°±æœ‰å¯¹AVIFæ”¯æŒçš„è¯·æ±‚ï¼Œè€Œå¼€å‘è€…ä¹Ÿåšå‡ºäº†å›å¤ï¼š\nNo. Iâ€™m the one who spend the most of my free time maintaining this project, so adding new C(++) dependencies is almost never going to happen unless we really, really need it. I have not calculated the cost of adding WebP to Hugo, but it wasnâ€™t cheap. Iâ€™ll keep this issue open as things may change, but itâ€™s not very likely unless a top quality native Go decoder/encoder pops up.\nä¸ã€‚æˆ‘æ˜¯é‚£ä¸ªèŠ±è´¹å¤§é‡ç©ºé—²æ—¶é—´ç»´æŠ¤è¿™ä¸ªé¡¹ç›®çš„äººï¼Œæ‰€ä»¥é™¤éæˆ‘ä»¬çœŸçš„éå¸¸éœ€è¦ï¼Œå¦åˆ™å‡ ä¹ä¸ä¼šæ·»åŠ æ–°çš„C(++)ä¾èµ–ã€‚æˆ‘æ²¡æœ‰è®¡ç®—è¿‡å°†WebPæ”¯æŒæ·»åŠ åˆ°Hugoçš„æˆæœ¬ï¼Œä½†æˆæœ¬å¹¶ä¸ä½ã€‚æˆ‘ä¼šä¿æŒè¿™ä¸ªé—®é¢˜çš„å¼€æ”¾çŠ¶æ€ï¼Œå› ä¸ºæƒ…å†µå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†é™¤éå‡ºç°é«˜è´¨é‡çš„ï¼ˆä»¥Goç¼–å†™çš„ï¼‰AVIFè§£ç å™¨/ç¼–ç å™¨ï¼Œå¦åˆ™è¿™ç§å¯èƒ½æ€§ä¸å¤§ã€‚\nç›´åˆ°è¿™ç¯‡æ–‡ç« è¯ç”Ÿä¹‹æ—¶ï¼Œè®¸å¤šHugoç”¨æˆ·æœŸå¾…çš„â€ä»¥Goç¼–å†™çš„é«˜è´¨é‡çš„AVIFè§£ç å™¨/ç¼–ç å™¨â€œä»ç„¶æ²¡æœ‰å‡ºç°ï¼Œæˆ–æ˜¯å‡ºç°äº†ä½†æ˜¯æ²¡æœ‰åˆå¹¶åˆ°Hugoä¹‹ä¸­ï¼Œäºæ˜¯Hugoå¯¹AVIFçš„æ”¯æŒä¹Ÿå°±æ²¡æœ‰äº†ä¸‹æ–‡ã€‚\nä¼ªè§£å†³æ–¹æ¡ˆçš„ä¼˜åŠ£ æ—¢ç„¶Hugoä¸æ”¯æŒå¤„ç†AVIFæ ¼å¼çš„å›¾ç‰‡ï¼Œå‡ºç°â€this method is only available for image resourcesâ€œçš„æŠ¥é”™ä¹Ÿå°±ä¸éš¾ç†è§£äº†ï¼šåœ¨Hugoçœ¼ä¸­ï¼ŒAVIFæ ¼å¼çš„å›¾ç‰‡ä¸å±äºå›¾ç‰‡èµ„æºã€‚\nå¤±å»äº†Hugoçš„å›¾ç‰‡å¤„ç†åŠŸèƒ½ï¼Œä¸ä»…è®©æˆ‘çš„â€å“åº”å¼å›¾ç‰‡â€œè¢«ç¦ç”¨ï¼Œæ›´è®©CLSçš„è§£å†³å˜å¾—å¾ˆæ›²æŠ˜ï¼Œæœ€ç»ˆåœ¨æœ‰é™çš„æ—¶é—´å’ŒçŸ¥è¯†å‚¨å¤‡ä¸‹ï¼Œæˆ‘å¾—åˆ°äº†ä¸Šé¢çš„ä¼ªè§£å†³æ–¹æ¡ˆã€‚è™½è¯´ç§°å…¶ä¸ºâ€ä¼ªè§£å†³æ–¹æ¡ˆâ€œï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•è¿˜æ˜¯æœ‰å…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿ï¼š\nå›¾ç‰‡æ ¼å¼çš„å‘åå…¼å®¹æ€§ è·¨ç”Ÿæˆå™¨çš„å…¼å®¹æ€§ å›¾ç‰‡æ ¼å¼çš„å…¼å®¹æ€§å¾ˆå¥½ç†è§£ï¼Œå› ä¸ºHTMLã€CSSå’ŒJavaScriptä¸æ¶‰åŠå¯¹å›¾ç‰‡æœ¬èº«çš„å¤„ç†ï¼Œå³ä½¿å°†å›¾ç‰‡æ ¼å¼ä»AVIFæ¢åˆ°JPEG XLã€WebP2æˆ–æ˜¯æ›´åŠ å…ˆè¿›çš„æ ¼å¼ï¼Œä¸Šé¢çš„ä»£ç ä¹Ÿåº”è¯¥èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚\nè·¨ç”Ÿæˆå™¨å…¼å®¹æ€§æ˜¯åœ¨Hugoä¸æ”¯æŒAVIFçš„æƒ…å†µä¸‹åº”è¿è€Œç”Ÿçš„ï¼Œå¤±å»äº†Hugoçš„å›¾ç‰‡å¤„ç†åŠŸèƒ½ä¹Ÿæ„å‘³ç€ä¸éœ€è¦Hugoçš„å›¾ç‰‡å¤„ç†åŠŸèƒ½ï¼Œå³ä½¿æœ‰ä¸€å¤©æˆ‘éœ€è¦æ›´æ¢é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼ˆSSGï¼‰ï¼Œé€šè¿‡ç®€å•çš„ä»£ç æ›¿æ¢ï¼Œå°±å¯ä»¥å®Œæˆç§»æ¤ã€‚\nè™½ç„¶æœ‰ä¼˜ç‚¹ï¼Œä½†æ˜¯å®ƒçš„ç¼ºç‚¹ä¹Ÿä¸èƒ½å¿½è§†ï¼š\nå ä½å…ƒç´ å¤§å°å›ºå®šï¼Œä¸éšå›¾ç‰‡å°ºå¯¸å˜åŒ– æ²¡æœ‰äºŒæ¬¡è®¡ç®—çš„èƒ½åŠ› å ä½å…ƒç´ å¤§å°å›ºå®šæ˜¯éå¸¸è‡´å‘½çš„ç¼ºç‚¹ï¼Œä¹Ÿæ˜¯è¿™ä¸ªæ–¹æ¡ˆè¢«ç§°ä½œâ€ä¼ªè§£å†³â€œçš„æ ¹æœ¬åŸå› ã€‚åœ¨æ— æ³•æå‰è·çŸ¥å›¾ç‰‡å°ºå¯¸çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ— æ³•å¯¹å ä½å®¹å™¨åšå‡ºè°ƒæ•´ï¼Œåªèƒ½å¤Ÿé€‰æ‹©å›ºå®šä¸€ä¸ªé€šç”¨å¤§å°ã€‚é€šè¿‡HTMLå’ŒJavaScriptå½“ç„¶ä¹Ÿèƒ½å¤Ÿå®ç°æå‰è·çŸ¥å›¾ç‰‡å°ºå¯¸ï¼Œä½†æ˜¯è¿™æ ·å®ç°çš„å›¾ç‰‡åŠ è½½å‰è°ƒæ•´åœ¨ç½‘é¡µåŠ è½½å‘¨æœŸçš„ä½ç½®è¿‡äºé åï¼Œå‡ ä¹æ˜¯è°ƒæ•´å®¹å™¨å¤§å°å’Œå›¾ç‰‡åŠ è½½åŒæ­¥è¿›è¡Œï¼Œèµ·ä¸åˆ°â€æå‰â€œçš„ä½œç”¨ï¼ŒåŒæ ·ä¼šå¼•å…¥CLSï¼Œè¿˜ä¼šä½¿ä»£ç æ›´åŠ å¤æ‚ï¼Œå› æ­¤ä½œç½¢ã€‚\nä¸Šé¢çš„ä¼ªè§£å†³æ–¹æ¡ˆåœ¨åŠ è½½é16:9æ¯”ä¾‹çš„å›¾ç‰‡æ—¶ï¼Œä¼šäºŒæ¬¡è°ƒæ•´ä½ç½®ã€‚é‰´äºæˆ‘æ‰€ä½¿ç”¨çš„å›¾ç‰‡å¤§å¤šä¸ºåŠ¨ç”»æˆªå›¾ï¼Œæ¯”ä¾‹ä¸€è‡´ï¼ŒäºŒæ¬¡è°ƒæ•´ä½ç½®æ‰€å¼•å…¥çš„CLSè¾ƒå°‘ï¼Œäºæ˜¯è¿™ä¸ªä¼ªè§£å†³æ–¹æ¡ˆåœ¨æˆ‘ä¸ªäººçš„ä½¿ç”¨åœºæ™¯æ‰ä¸‹æœ‰äº†æˆç«‹çš„å¯èƒ½ã€‚\nå¦‚æœæ‰€ä½¿ç”¨çš„å›¾ç‰‡å¤§å°ä¸ä¸€ï¼Œè¿™ä¸ªæ–¹æ¡ˆçš„æ•ˆæœå°±ä¼šè¾ƒå·®ï¼Œè¿™æ—¶ä¾¿ä¸åº”ç§°å…¶ä¸ºä¼ªè§£å†³æ–¹æ¡ˆäº†ï¼Œå«æ”¹å–„æ–¹æ¡ˆæ›´ä¸ºåˆé€‚ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å›ºå®šå®¹å™¨å¤§å°ï¼Œä»¤å›¾ç‰‡æ¯”ä¾‹å›ºå®šä»¥é€‚åº”å®¹å™¨ï¼Œä»£ä»·å°±æ˜¯å›¾ç‰‡å››å‘¨ç©ºä½™å’Œç¼©æ”¾ã€‚\nç¬¬äºŒç‚¹é—®é¢˜æ˜¯åœ¨è°ƒè¯•æ—¶å¶ç„¶å‘ç°çš„ï¼Œå½“ä½¿ç”¨è°ƒè¯•å°ï¼Œå°†å“åº”å¼è®¾è®¡æ¨¡å¼è®¾ç½®åœ¨ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯æ¥å›åˆ‡æ¢æ—¶ï¼Œä¼šäº§ç”Ÿå›¾ç‰‡é”™ä½ã€‚è¿™æ˜¯é¢„æœŸå†…çš„è¡Œä¸ºï¼Œå› ä¸ºæŒ‰ç…§è®¾è®¡ï¼ŒJavaScriptå‡½æ•°åªä¼šè®¡ç®—ä¸€æ¬¡å®¹å™¨é«˜åº¦ï¼Œå½“UAæ”¹å˜å¯¼è‡´ç«™ç‚¹æ’ç‰ˆå‘ç”Ÿå˜åŒ–ï¼Œå‡½æ•°å¹¶ä¸ä¼šå†æ¬¡è®¡ç®—ã€‚ä¸çŸ¥é“ä½¿ç”¨äº†Hugoç›¸å…³åŠŸèƒ½çš„æ–¹æ¡ˆæ˜¯å¦ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Œä½†æ˜¯é‰´äºè¿™ç§è¡Œä¸ºè¿‡äºç¨€å°‘ä¸”å¼‚å¸¸ï¼Œæˆ‘æ— æ„é’ˆå¯¹è¿™ä¸ªé—®é¢˜æ”¹è¿›ä»£ç ã€‚\nä¸ºä»€ä¹ˆæ˜¯AVIF å…¶å®åœ¨é‡åˆ°è¿™ä¸ªé—®é¢˜çš„ä¸€åˆ»ï¼Œæˆ‘ä¹Ÿæœ‰è€ƒè™‘è¿‡å°†ç«™ç‚¹çš„æ‰€æœ‰å›¾ç‰‡æ ¼å¼æ›´æ¢ä¸ºWebPï¼Œä½†æ˜¯ç»è¿‡ä¸ªäººä¸ä¸¥è°¨ä¸”ä¸»è§‚çš„å°è¯•ä¸å¯¹æ¯”åï¼Œæˆ‘æ”¾å¼ƒäº†ã€‚AVIFåœ¨å‹ç¼©è´¨é‡å’Œä½“ç§¯ä¸Šéƒ½æ¯”WebPæ›´æœ‰ä¼˜åŠ¿ï¼Œå°¤å…¶åœ¨æŸäº›çº¹ç†å¤æ‚çš„åœºæ™¯ï¼ŒWebPä¼šæ¶‚æŠ¹ç»†èŠ‚ï¼Œè€ŒAVIFèƒ½å°†çº¹ç†å°½å¯èƒ½åœ°ä¿ç•™ã€‚ä½œä¸ºä¸€ä¸ªä¸»è¦å‘å¸ƒè§‚åæ„Ÿå’ŒåŠ¨ç”»æˆªå›¾çš„åšå®¢ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºå›¾ç‰‡è´¨é‡è¿˜æ˜¯ç›¸å½“é‡è¦çš„ï¼Œäºæ˜¯AVIFå°±è¿™æ ·è¢«åšæŒäº†ä¸‹æ¥ã€‚\nä¸ªäººè®¤ä¸ºAVIFæ˜¯ä¸€ä¸ªå…¸å‹çš„â€åŠä»£äº§å“â€œï¼Œå‰æœ‰WebPï¼Œä½œä¸ºå‡ºç°ç›¸å¯¹æ—©ä¸”è¢«å¹¿æ³›åº”ç”¨çš„ç°ä»£å›¾ç‰‡æ ¼å¼ï¼›åæœ‰JPEG XLå’ŒWebP2ï¼Œæä¾›äº†æ›´é«˜çš„å‹ç¼©ç‡ã€ç”»é¢ç»†èŠ‚ä¸å…¶å®ƒå‚æ•°ã€‚AVIFä½œä¸ºä¸­é—´æ´¾ï¼Œåœ¨æµè§ˆå™¨æ™®åŠç‡å’Œæ€§èƒ½é—´å–å¾—äº†å¹³è¡¡ï¼Œæ˜¯æˆ‘æ¯”è¾ƒå–œæ¬¢çš„ä¸­åº¸åšæ´¾ã€‚\nAVIFçš„å‹ç¼©æ€§èƒ½è¿‡äºå¼ºå¤§ï¼Œä»¥è‡³äºè´¨é‡ä¸º20çš„WebPéœ€è¦å’ŒåŒæ ·å¤§å°ã€è´¨é‡ä¸º50çš„AVIFåšæ¯”è¾ƒã€‚åœ¨AVIFé¢å‰çš„WebPæ˜¾å¾—è¿‡äºâ€ä¸ç°ä»£ã€ä¸å…ˆè¿›â€œã€‚ç»è¿‡æ—¶é—´ç§¯ç´¯ï¼Œç°ä»£æµè§ˆå™¨å¯¹AVIFçš„æ”¯æŒæƒ…å†µå·²ç»ç›¸å½“å®Œå–„äº†ï¼Œæˆ‘è®¤ä¸ºç°åœ¨ä½¿ç”¨AVIFï¼Œç™¾åˆ©è€Œæ— ä¸€å®³ã€‚\nZolaåˆæ¢ ä½œä¸ºé™æ€ç«™ç‚¹ç”Ÿæˆå™¨çš„æ–°æ˜Ÿï¼ŒZolaæ˜¯æˆ‘é¢„å®šçš„ä¸‹ä¸€ä¸ªæ‰€ä½¿ç”¨çš„æ¡†æ¶ã€‚åœ¨é‡åˆ°Hugoä¸AVIFçš„é—®é¢˜æ—¶ï¼Œæˆ‘ä¹Ÿå»äº†è§£äº†ä¸€ç•ªZolaå¯¹äºAVIFçš„æ”¯æŒæƒ…å†µï¼Œæ¯•ç«Ÿå¦‚æœAVIFçš„ç—›ç‚¹åœ¨Hugoæ— æ³•è§£å†³ï¼Œå¯ä»¥é€šè¿‡è¿ç§»ç«™ç‚¹åˆ°æ–°çš„æ¡†æ¶æ ¹é™¤ã€‚\nä»¤æˆ‘å¤§è·Œçœ¼é•œçš„æ˜¯ï¼ŒZolaä½œä¸ºä½¿ç”¨Rustç¼–å†™çš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œç«Ÿç„¶ä¹Ÿä¸æ”¯æŒå¤„ç†AVIFã€‚Hugoä¸æ”¯æŒAVIFæ˜¯åœ¨ç­‰å¾…ä¸€ä¸ªä»¥Goç¼–å†™çš„AVIFè§£ç å™¨/ç¼–ç å™¨ï¼Œè€ŒRustæ—©å·²æ‹¥æœ‰äº†ä¸€ä¸ªAVIFç¼–ç å™¨rav1eï¼Œåªèƒ½æ€ªå¼€å‘è€…ä»¬å¯¹ç°ä»£å›¾ç‰‡æ ¼å¼çš„æ”¯æŒä¸å¤ªä¸Šå¿ƒäº†ã€‚\nå¦å¤–ï¼ŒZolaçš„ç”Ÿæ€ç›¸æ¯”Hugoä¹Ÿå¤ªè¿‡è´«ç˜ ã€‚åœ¨Zolaå®˜æ–¹ç½‘ç«™çš„ä¸»é¢˜é¡µä¸­ï¼Œæˆ‘ä¼¼ä¹æ‰¾ä¸åˆ°ä¸€ä¸ªåŒ…å«æ–‡ç« å°é¢ã€æœç´¢å’Œç›®å½•ç­‰åŠŸèƒ½çš„é«˜åº¦å¯ç”¨çš„ä¸»é¢˜ï¼Œä½œä¸ºæ–°äº‹ç‰©ï¼Œè¿™æ˜¯æ— å¯é¿å…çš„æƒ…å†µã€‚çœ‹æ¥æƒ³è¦ä½“éªŒZolaï¼Œè¿˜éœ€è¦ç¤¾åŒºçš„æˆé•¿å’Œæ—¶é—´çš„æ²‰æ·€ã€‚\n","wordCount":"5946","inLanguage":"zh","image":"https://xeonzilla.github.io/404.html","datePublished":"2024-07-31T13:58:00+08:00","dateModified":"2024-08-14T22:39:00+08:00","author":{"@type":"Person","name":"Xeonzilla"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xeonzilla.github.io/post/hugo_avif_cls/"},"publisher":{"@type":"Organization","name":"Xeonzilla's Note","logo":{"@type":"ImageObject","url":"https://xeonzilla.github.io/assets/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xeonzilla.github.io/ accesskey=h title="Xeonzilla's Note (Alt + H)">Xeonzilla's Note</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://xeonzilla.github.io/search title="æœç´¢ (Alt + /)" accesskey=/><span>æœç´¢</span></a></li><li><a href=https://xeonzilla.github.io/ title=ä¸»é¡µ><span>ä¸»é¡µ</span></a></li><li><a href=https://xeonzilla.github.io/about title=å…³äº><span>å…³äº</span></a></li><li><a href=https://xeonzilla.github.io/post title=å½’æ¡£><span>å½’æ¡£</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://xeonzilla.github.io/>ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href=https://xeonzilla.github.io/post/>å½’æ¡£</a></div><h1 class="post-title entry-hint-parent">Hugoä¸­çš„AVIFä¸ç´¯ç§¯å¸ƒå±€åç§»ï¼ˆCLSï¼‰</h1><div class=post-meta><span title='2024-08-14 22:39:00 +0800 +0800'>(æœ€åæ›´æ–°äº08-14, 2024)</span>&nbsp;Â·&nbsp;<span title='2024-07-31 13:58:00 +0800 +0800'>07-31, 2024</span>&nbsp;Â·&nbsp;12 åˆ†é’Ÿ&nbsp;Â·&nbsp;5946 å­—&nbsp;Â·&nbsp;Xeonzilla</div></header><figure class=entry-cover><a href=https://xeonzilla.github.io/404.html target=_blank rel="noopener noreferrer"><style>.container{display:flex;justify-content:center;align-items:center;width:100%;max-width:720px;aspect-ratio:16/9;position:relative;background-color:transparent}.container img{max-width:100%;height:auto;display:block}</style><div class=container><img onload=resizeContainer(this) loading=eager src=https://xeonzilla.github.io/404.html alt="æœªè®¾ç½®å°é¢ä»¥å±•ç¤ºå ä½æ•ˆæœ | æ¬¢è¿ğŸ‘‹ è¿™é‡Œæ˜¯Xeonzillaçš„ç¬”è®°"></div><script>function resizeContainer(e){const t=e.parentElement,n=e.naturalHeight/e.naturalWidth;t.style.height=`${t.clientWidth*n}px`}</script></a></figure><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><ul><li><a href=#cls%e7%9a%84%e4%bc%aa%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88 aria-label=CLSçš„ä¼ªè§£å†³æ–¹æ¡ˆ>CLSçš„ä¼ªè§£å†³æ–¹æ¡ˆ</a><ul><li><a href=#%e4%bd%95%e8%b0%93cls aria-label=ä½•è°“CLS>ä½•è°“CLS</a></li><li><a href=#%e6%96%b9%e6%a1%88%e5%b1%95%e7%a4%ba aria-label=æ–¹æ¡ˆå±•ç¤º>æ–¹æ¡ˆå±•ç¤º</a><ul><li><a href=#render-imagehtml aria-label=render-image.html>render-image.html</a></li><li><a href=#coverhtml aria-label=cover.html>cover.html</a></li><li><a href=#inner_coverhtml%e4%b8%8esinglehtml aria-label=inner_cover.htmlä¸single.html>inner_cover.htmlä¸single.html</a></li></ul></li><li><a href=#%e7%bb%86%e8%8a%82%e8%af%b4%e6%98%8e aria-label=ç»†èŠ‚è¯´æ˜>ç»†èŠ‚è¯´æ˜</a><ul><li><a href=#css aria-label=CSS>CSS</a></li><li><a href=#javascript aria-label=JavaScript>JavaScript</a></li></ul></li></ul></li><li><a href=#avif%e5%9b%b0%e5%a2%83 aria-label=AVIFå›°å¢ƒ>AVIFå›°å¢ƒ</a><ul><li><a href=#hugo%e4%b8%ad%e7%9a%84avif aria-label=Hugoä¸­çš„AVIF>Hugoä¸­çš„AVIF</a></li><li><a href=#%e4%bc%aa%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88%e7%9a%84%e4%bc%98%e5%8a%a3 aria-label=ä¼ªè§£å†³æ–¹æ¡ˆçš„ä¼˜åŠ£>ä¼ªè§£å†³æ–¹æ¡ˆçš„ä¼˜åŠ£</a></li><li><a href=#%e4%b8%ba%e4%bb%80%e4%b9%88%e6%98%afavif aria-label=ä¸ºä»€ä¹ˆæ˜¯AVIF>ä¸ºä»€ä¹ˆæ˜¯AVIF</a></li></ul></li><li><a href=#zola%e5%88%9d%e6%8e%a2 aria-label=Zolaåˆæ¢>Zolaåˆæ¢</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=clsçš„ä¼ªè§£å†³æ–¹æ¡ˆ>CLSçš„ä¼ªè§£å†³æ–¹æ¡ˆ<a hidden class=anchor aria-hidden=true href=#clsçš„ä¼ªè§£å†³æ–¹æ¡ˆ>#</a></h2><h3 id=ä½•è°“cls>ä½•è°“CLS<a hidden class=anchor aria-hidden=true href=#ä½•è°“cls>#</a></h3><p>Googleçš„PageSpeed InsightsæŠ¥å‘Šä¸­å±•ç¤ºäº†å››å¤§ç»´åº¦çš„æŒ‡æ ‡ï¼š<code>FCP</code>ã€<code>LCP</code>ã€<code>TBT</code>ã€<code>CLS</code>ã€‚å…¶ä¸­ï¼ŒCLSæ˜¯æŒ‡Cumulative Layout Shiftï¼Œå³ç´¯ç§¯å¸ƒå±€åç§»ã€‚</p><blockquote><p>Cumulative Layout Shift (CLS) æ˜¯ä¸€é¡¹ç¨³å®šçš„ Core Web Vitals æŒ‡æ ‡ã€‚å®ƒæ˜¯ä¸€é¡¹ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„é‡è¦æŒ‡æ ‡ï¼Œç”¨äºè¡¡é‡è§†è§‰ç¨³å®šæ€§ï¼Œå› ä¸ºå®ƒæœ‰åŠ©äºé‡åŒ–ç”¨æˆ·é‡åˆ°æ„å¤–å¸ƒå±€åç§»çš„é¢‘ç‡ï¼Œè€Œè¾ƒä½çš„ CLS æœ‰åŠ©äºç¡®ä¿ç½‘é¡µå¸¦æ¥æ„‰æ‚¦çš„ä½“éªŒã€‚</p><p>æ„å¤–çš„å¸ƒå±€åç§»å¯èƒ½ä¼šåœ¨å¾ˆå¤šæ–¹é¢å½±å“ç”¨æˆ·ä½“éªŒï¼Œä¾‹å¦‚ï¼Œå¦‚æœæ–‡æœ¬çªç„¶ç§»åŠ¨ï¼Œå¯¼è‡´ç”¨æˆ·åœ¨é˜…è¯»æ—¶å¤±å»ä½ç½®ï¼Œæˆ–è®©ç”¨æˆ·ç‚¹å‡»é”™è¯¯çš„é“¾æ¥æˆ–æŒ‰é’®ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½ä¼šé€ æˆä¸¥é‡æŸå®³ã€‚</p><p><style>.container{display:flex;justify-content:center;align-items:center;width:100%;max-width:720px;aspect-ratio:16/9;position:relative;background-color:transparent}.container img{max-width:100%;height:auto;display:block}</style><div class=container><img onload=resizeContainer(this) loading=lazy src=01.avif alt=ç´¯ç§¯å¸ƒå±€åç§» title=ç´¯ç§¯å¸ƒå±€åç§»></div><script>function resizeContainer(e){const t=e.parentElement,n=e.naturalHeight/e.naturalWidth;t.style.height=`${t.clientWidth*n}px`}</script></p><p>å½“ä»¥å¼‚æ­¥æ–¹å¼åŠ è½½èµ„æºï¼Œæˆ–å°† DOM å…ƒç´ åŠ¨æ€æ·»åŠ åˆ°ç½‘é¡µä¸­çš„ç°æœ‰å†…å®¹ä¹‹å‰æ—¶ï¼Œé€šå¸¸ä¼šå‘ç”Ÿç½‘é¡µå†…å®¹æ„å¤–ç§»åŠ¨ã€‚å¯¼è‡´å¸ƒå±€åç§»çš„åŸå› å¯èƒ½åŒ…æ‹¬å°ºå¯¸æœªçŸ¥çš„å›¾ç‰‡æˆ–è§†é¢‘ã€å‘ˆç°çš„å­—ä½“å¤§äºæˆ–å°äºå…¶åˆå§‹åå¤‡å°ºå¯¸ï¼Œæˆ–è€…æ˜¯ä¼šè‡ªè¡ŒåŠ¨æ€è°ƒæ•´å¤§å°çš„ç¬¬ä¸‰æ–¹å¹¿å‘Šæˆ–å¾®ä»¶ã€‚</p></blockquote><p>ç®€å•æ¥è¯´ï¼ŒCLSæ˜¯ç½‘ç«™è®¾è®¡æ—¶åº”è¯¥é¿å…çš„é—®é¢˜ã€‚åœ¨Hugoä¸­ï¼Œä¸€èˆ¬éœ€è¦åˆ©ç”¨<a href=https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images>åˆ©ç”¨å“åº”å¼å›¾ç‰‡ï¼ˆResponsive imagesï¼‰</a>ã€<a href=https://gohugo.io/content-management/page-bundles/>é¡µé¢æŸï¼ˆPage bundlesï¼‰</a>ã€<a href=https://gohugo.io/render-hooks/images/>å›¾åƒæ¸²æŸ“æŒ‚é’©ï¼ˆImage render hooksï¼‰</a>å’Œ<a href=https://gohugo.io/content-management/image-processing/>å›¾åƒå¤„ç†ï¼ˆImage processingï¼‰</a>ç­‰å·¥å…·æˆ–å¤„ç†æ–¹æ³•ã€‚</p><p>åœ¨æˆ‘çš„â€œä¼ªè§£å†³æ–¹æ¡ˆâ€ä¸­ï¼Œä¸»è¦å€ŸåŠ©äº†HTMLå’ŒCSSçš„ç‰¹æ€§ï¼Œä¸ä¾èµ–äºHugoçš„å›¾åƒå¤„ç†ã€‚</p><h3 id=æ–¹æ¡ˆå±•ç¤º>æ–¹æ¡ˆå±•ç¤º<a hidden class=anchor aria-hidden=true href=#æ–¹æ¡ˆå±•ç¤º>#</a></h3><h4 id=render-imagehtml>render-image.html<a hidden class=anchor aria-hidden=true href=#render-imagehtml>#</a></h4><p>é¦–å…ˆéœ€è¦åœ¨Hugoç«™ç‚¹ç›®å½•<code>layouts/_default/_markup</code>è·¯å¾„ä¸‹ï¼Œåˆ›å»ºåä¸º<code>render-image.html</code>çš„æ–‡ä»¶ï¼Œå®ƒè´Ÿè´£Hugoå¯¹å›¾åƒçš„æ¸²æŸ“ã€‚</p><p>æˆ‘æ‰€ä½¿ç”¨çš„<code>render-image.html</code>ä»£ç å¦‚ä¸‹ï¼š</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#7ee787>style</span>&gt;
</span></span><span style=display:flex><span>    .<span style=color:#f0883e;font-weight:700>container</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>display</span>: <span style=color:#79c0ff>flex</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>justify-content</span>: <span style=color:#79c0ff>center</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>align-items</span>: <span style=color:#79c0ff>center</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>width</span>: <span style=color:#a5d6ff>100</span><span style=color:#ff7b72>%</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>max-width</span>: <span style=color:#a5d6ff>720</span><span style=color:#ff7b72>px</span>;
</span></span><span style=display:flex><span>        aspect-ratio: <span style=color:#a5d6ff>16</span><span style=color:#ff7b72;font-weight:700>/</span><span style=color:#a5d6ff>9</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>position</span>: <span style=color:#79c0ff>relative</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>background-color</span>: rgba(<span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>0</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    .<span style=color:#f0883e;font-weight:700>container</span> <span style=color:#7ee787>img</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>max-width</span>: <span style=color:#a5d6ff>100</span><span style=color:#ff7b72>%</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>height</span>: <span style=color:#79c0ff>auto</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>display</span>: <span style=color:#79c0ff>block</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>&lt;/<span style=color:#7ee787>style</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#7ee787>div</span> class<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;container&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#7ee787>img</span> onload<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;resizeContainer(this)&#34;</span> loading<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;lazy&#34;</span> src<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ .Destination | safeURL }}&#34;</span> alt<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ .Text }}&#34;</span> <span style=color:#f85149>{{</span>with<span style=color:#f85149>.</span>Title<span style=color:#f85149>}}</span> title<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ . }}&#34;</span> <span style=color:#f85149>{{</span>end<span style=color:#f85149>}}</span> /&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#7ee787>script</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>function</span> resizeContainer(img) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> container <span style=color:#ff7b72;font-weight:700>=</span> img.parentElement;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> aspectRatio <span style=color:#ff7b72;font-weight:700>=</span> img.naturalHeight <span style=color:#ff7b72;font-weight:700>/</span> img.naturalWidth;
</span></span><span style=display:flex><span>        container.style.height <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>`</span><span style=color:#a5d6ff>${</span>container.clientWidth <span style=color:#ff7b72;font-weight:700>*</span> aspectRatio<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>px`</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>&lt;/<span style=color:#7ee787>script</span>&gt;
</span></span></code></pre></td></tr></table></div></div><p>å…¶ä¸­ï¼Œ<code>max-width: 720px; aspect-ratio: 16/9;</code>æ˜¯æ ¹æ®æ‰€ä½¿ç”¨çš„ä¸»é¢˜æ–‡ç« å†…å›¾ç‰‡å¤§å°è€Œè®¾å®šçš„å€¼ï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼Œæˆ‘æ‰€ä½¿ç”¨çš„PaperModä¸»é¢˜åœ¨æ–‡ç« å†…å›¾ç‰‡å°ºå¯¸ä¸º720px*405pxã€‚</p><h4 id=coverhtml>cover.html<a hidden class=anchor aria-hidden=true href=#coverhtml>#</a></h4><p>æ¥ä¸‹æ¥ä»¥PaperModä¸ºä¾‹ï¼Œå› ä¸ºHugoå„ä¸ªä¸»é¢˜ä¹‹é—´çš„ç»“æ„å¯èƒ½ç•¥æœ‰ä¸åŒï¼Œä¿®æ”¹å‰åº”å½“è‡ªè¡Œè°ƒæ•´ã€‚åœ¨<code>themes/PaperMod/layouts/partials</code>ä¸‹å¤åˆ¶ä¸€ä»½<code>cover.html</code>ï¼Œç²˜è´´åˆ°<code>layouts/partials</code>ä¸‹ã€‚PaperModæä¾›çš„æœ‰å…³å°é¢æ˜¾ç¤ºçš„ä»£ç ä¸ºï¼š</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>    {{- if (and (in $processableFormats $cover.MediaType.SubType) ($responsiveImages) (eq $prod true)) }}
</span></span><span style=display:flex><span>    &lt;<span style=color:#7ee787>img</span> loading<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{$loading}}&#34;</span> srcset<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{- range $size := $sizes -}}
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>                    {{- if (ge $cover.Width $size) -}}
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>                    {{ printf &#34;</span><span style=color:#f85149>%</span>s <span style=color:#f85149>%</span>s<span style=color:#f85149>&#34;</span> <span style=color:#f85149>(($</span>cover<span style=color:#f85149>.</span>Resize <span style=color:#f85149>(</span>printf <span style=color:#f85149>&#34;%</span>sx<span style=color:#f85149>&#34;</span> <span style=color:#f85149>$</span>size<span style=color:#f85149>)).</span>Permalink<span style=color:#f85149>)</span> <span style=color:#f85149>(</span>printf <span style=color:#f85149>&#34;%</span>sw <span style=color:#f85149>,&#34;</span> <span style=color:#f85149>$</span>size<span style=color:#f85149>)</span> -<span style=color:#f85149>}}</span>
</span></span><span style=display:flex><span>                    <span style=color:#f85149>{{</span> end <span style=color:#f85149>}}</span>
</span></span><span style=display:flex><span>                <span style=color:#f85149>{{</span>- end -<span style=color:#f85149>}}{{$</span>cover<span style=color:#f85149>.</span>Permalink <span style=color:#f85149>}}</span> <span style=color:#f85149>{{</span>printf <span style=color:#f85149>&#34;%</span>dw<span style=color:#f85149>&#34;</span> <span style=color:#f85149>($</span>cover<span style=color:#f85149>.</span>Width<span style=color:#f85149>)}}&#34;</span> 
</span></span><span style=display:flex><span>        sizes<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;(min-width: 768px) 720px, 100vw&#34;</span> src<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ $cover.Permalink }}&#34;</span> alt<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ $alt }}&#34;</span> 
</span></span><span style=display:flex><span>        width<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ $cover.Width }}&#34;</span> height<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ $cover.Height }}&#34;</span>&gt;
</span></span><span style=display:flex><span>    {{- else }}{{/* Unprocessable image or responsive images disabled */}}
</span></span><span style=display:flex><span>    &lt;<span style=color:#7ee787>img</span> loading<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{$loading}}&#34;</span> src<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ (path.Join .RelPermalink .Params.cover.image) | absURL }}&#34;</span> alt<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ $alt }}&#34;</span>&gt;
</span></span><span style=display:flex><span>    {{- end }}
</span></span><span style=display:flex><span>{{- else }}{{/* For absolute urls and external links, no img processing here */}}
</span></span><span style=display:flex><span>    {{- if $addLink }}&lt;<span style=color:#7ee787>a</span> href<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ (.Params.cover.image) | absURL }}&#34;</span> target<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;_blank&#34;</span>
</span></span><span style=display:flex><span>        rel<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;noopener noreferrer&#34;</span>&gt;{{ end -}}
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>img</span> loading<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{$loading}}&#34;</span> src<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ (.Params.cover.image) | absURL }}&#34;</span> alt<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ $alt }}&#34;</span>&gt;
</span></span><span style=display:flex><span>{{- end }}
</span></span></code></pre></td></tr></table></div></div><p>ä»¿ç…§ä¸Šé¢çš„<code>render-image.html</code>ï¼Œå°†å…¶ä¿®æ”¹ä¸ºï¼š</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">68
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>    {{- if (and (in $processableFormats $cover.MediaType.SubType) ($responsiveImages) (eq $prod true)) }}
</span></span><span style=display:flex><span>    &lt;<span style=color:#7ee787>img</span> loading<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{$loading}}&#34;</span> srcset<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{- range $size := $sizes -}}
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>                    {{- if (ge $cover.Width $size) -}}
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>                    {{ printf &#34;</span><span style=color:#f85149>%</span>s <span style=color:#f85149>%</span>s<span style=color:#f85149>&#34;</span> <span style=color:#f85149>(($</span>cover<span style=color:#f85149>.</span>Resize <span style=color:#f85149>(</span>printf <span style=color:#f85149>&#34;%</span>sx<span style=color:#f85149>&#34;</span> <span style=color:#f85149>$</span>size<span style=color:#f85149>)).</span>Permalink<span style=color:#f85149>)</span> <span style=color:#f85149>(</span>printf <span style=color:#f85149>&#34;%</span>sw <span style=color:#f85149>,&#34;</span> <span style=color:#f85149>$</span>size<span style=color:#f85149>)</span> -<span style=color:#f85149>}}</span>
</span></span><span style=display:flex><span>                    <span style=color:#f85149>{{</span> end <span style=color:#f85149>}}</span>
</span></span><span style=display:flex><span>                <span style=color:#f85149>{{</span>- end -<span style=color:#f85149>}}{{$</span>cover<span style=color:#f85149>.</span>Permalink <span style=color:#f85149>}}</span> <span style=color:#f85149>{{</span>printf <span style=color:#f85149>&#34;%</span>dw<span style=color:#f85149>&#34;</span> <span style=color:#f85149>($</span>cover<span style=color:#f85149>.</span>Width<span style=color:#f85149>)}}&#34;</span> 
</span></span><span style=display:flex><span>        sizes<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;(min-width: 768px) 720px, 100vw&#34;</span> src<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ $cover.Permalink }}&#34;</span> alt<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ $alt }}&#34;</span> 
</span></span><span style=display:flex><span>        width<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ $cover.Width }}&#34;</span> height<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ $cover.Height }}&#34;</span>&gt;
</span></span><span style=display:flex><span>    {{- else }}{{/* Unprocessable image or responsive images disabled */}}
</span></span><span style=display:flex><span>    &lt;<span style=color:#7ee787>style</span>&gt;
</span></span><span style=display:flex><span>        .<span style=color:#f0883e;font-weight:700>container</span> {
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>display</span>: <span style=color:#79c0ff>flex</span>;
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>justify-content</span>: <span style=color:#79c0ff>center</span>;
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>align-items</span>: <span style=color:#79c0ff>center</span>;
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>width</span>: <span style=color:#a5d6ff>100</span><span style=color:#ff7b72>%</span>;
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>max-width</span>: <span style=color:#a5d6ff>670.4</span><span style=color:#ff7b72>px</span>;
</span></span><span style=display:flex><span>            aspect-ratio: <span style=color:#a5d6ff>16</span><span style=color:#ff7b72;font-weight:700>/</span><span style=color:#a5d6ff>9</span>;
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>position</span>: <span style=color:#79c0ff>relative</span>;
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>background-color</span>: rgba(<span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>0</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        .<span style=color:#f0883e;font-weight:700>container</span> <span style=color:#7ee787>img</span> {
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>max-width</span>: <span style=color:#a5d6ff>100</span><span style=color:#ff7b72>%</span>;
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>height</span>: <span style=color:#79c0ff>auto</span>;
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>display</span>: <span style=color:#79c0ff>block</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    &lt;/<span style=color:#7ee787>style</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#7ee787>div</span> class<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;container&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>img</span> onload<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;resizeContainer(this)&#34;</span> loading<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{$loading}}&#34;</span> src<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ (path.Join .RelPermalink .Params.cover.image) | absURL }}&#34;</span> alt<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ $alt }}&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#7ee787>script</span>&gt;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>function</span> resizeContainer(img) {
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>const</span> container <span style=color:#ff7b72;font-weight:700>=</span> img.parentElement;
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>const</span> aspectRatio <span style=color:#ff7b72;font-weight:700>=</span> img.naturalHeight <span style=color:#ff7b72;font-weight:700>/</span> img.naturalWidth;
</span></span><span style=display:flex><span>            container.style.height <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>`</span><span style=color:#a5d6ff>${</span>container.clientWidth <span style=color:#ff7b72;font-weight:700>*</span> aspectRatio<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>px`</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    &lt;/<span style=color:#7ee787>script</span>&gt;        
</span></span><span style=display:flex><span>    {{- end }}
</span></span><span style=display:flex><span>{{- else }}{{/* For absolute urls and external links, no img processing here */}}
</span></span><span style=display:flex><span>    {{- if $addLink }}&lt;<span style=color:#7ee787>a</span> href<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ (.Params.cover.image) | absURL }}&#34;</span> target<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;_blank&#34;</span>
</span></span><span style=display:flex><span>        rel<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;noopener noreferrer&#34;</span>&gt;{{ end -}}
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>style</span>&gt;
</span></span><span style=display:flex><span>            .<span style=color:#f0883e;font-weight:700>container</span> {
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>display</span>: <span style=color:#79c0ff>flex</span>;
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>justify-content</span>: <span style=color:#79c0ff>center</span>;
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>align-items</span>: <span style=color:#79c0ff>center</span>;
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>width</span>: <span style=color:#a5d6ff>100</span><span style=color:#ff7b72>%</span>;
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>max-width</span>: <span style=color:#a5d6ff>670.4</span><span style=color:#ff7b72>px</span>;
</span></span><span style=display:flex><span>                aspect-ratio: <span style=color:#a5d6ff>16</span><span style=color:#ff7b72;font-weight:700>/</span><span style=color:#a5d6ff>9</span>;
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>position</span>: <span style=color:#79c0ff>relative</span>;
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>background-color</span>: rgba(<span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>0</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            .<span style=color:#f0883e;font-weight:700>container</span> <span style=color:#7ee787>img</span> {
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>max-width</span>: <span style=color:#a5d6ff>100</span><span style=color:#ff7b72>%</span>;
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>height</span>: <span style=color:#79c0ff>auto</span>;
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>display</span>: <span style=color:#79c0ff>block</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>style</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>div</span> class<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;container&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>img</span> onload<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;resizeContainer(this)&#34;</span> loading<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{$loading}}&#34;</span> src<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ (.Params.cover.image) | absURL }}&#34;</span> alt<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;{{ $alt }}&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>script</span>&gt;
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>function</span> resizeContainer(img) {
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>const</span> container <span style=color:#ff7b72;font-weight:700>=</span> img.parentElement;
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>const</span> aspectRatio <span style=color:#ff7b72;font-weight:700>=</span> img.naturalHeight <span style=color:#ff7b72;font-weight:700>/</span> img.naturalWidth;
</span></span><span style=display:flex><span>                container.style.height <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>`</span><span style=color:#a5d6ff>${</span>container.clientWidth <span style=color:#ff7b72;font-weight:700>*</span> aspectRatio<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>px`</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>script</span>&gt;            
</span></span><span style=display:flex><span>  {- end }}
</span></span></code></pre></td></tr></table></div></div><p>åŒä¸Šé¢ä¸€æ ·ï¼Œ<code>max-width: 670.4px; aspect-ratio: 16/9;</code>æ˜¯æ ¹æ®æ‰€ä½¿ç”¨çš„ä¸»é¢˜å°é¢å›¾ç‰‡å¤§å°è€Œè®¾å®šçš„å€¼ï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼Œæˆ‘æ‰€ä½¿ç”¨çš„PaperModä¸»é¢˜å°é¢å›¾ç‰‡å°ºå¯¸ä¸º670.4px*377.1pxã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼ŒPaperModæä¾›çš„æœ‰å…³å°é¢æ˜¾ç¤ºçš„ä»£ç æä¾›äº†3æ®µHTMLï¼Œä½†æ˜¯æˆ‘åªä¿®æ”¹äº†åé¢ä¸¤æ®µï¼Œè¿™æ˜¯å› ä¸ºç¬¬1æ®µHTMLéœ€è¦<code>params.cover.responsiveImages = true</code>è§¦å‘ï¼Œè€Œæˆ‘å…³é—­äº†å“åº”å¼å›¾ç‰‡ï¼Œæ‰€ä»¥æ— éœ€ä¿®æ”¹ã€‚</p><h4 id=inner_coverhtmlä¸singlehtml>inner_cover.htmlä¸single.html<a hidden class=anchor aria-hidden=true href=#inner_coverhtmlä¸singlehtml>#</a></h4><p>åœ¨ä¸Šé¢çš„cover.htmlä¸­ï¼Œæˆ‘ä»¬ç»™å®šäº†<code>max-width: 670.4px</code>ï¼Œè¿™å¸®åŠ©æˆ‘ä»¬è§„å®šå°é¢çš„å¤§å°ã€‚ç„¶è€Œï¼ŒPaperModä¸»é¢˜åœ¨ä¸»é¡µçš„å°é¢å’Œåœ¨æ–‡ç« å†…çš„å°é¢å¤§å°åˆæœ‰ä¸åŒï¼Œåœ¨æ–‡ç« è¯¦æƒ…é¡µï¼Œå°é¢çš„å¤§å°ä¸º720px*405pxï¼ŒåŒæ–‡ç« å†…å›¾ç‰‡å¤§å°ä¸€æ ·ã€‚</p><p>ä¸ºäº†ä¿æŒå†…å¤–å°é¢çš„å°ºå¯¸ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸¤å¤„å°é¢çš„æœ‰å…³ä»£ç è§£è€¦ã€‚å¤åˆ¶ä¸€ä»½<code>cover.html</code>å¹¶å°†å…¶é‡å‘½åï¼Œä¸ºäº†ä¾¿äºè¾¨è®¤ï¼Œæˆ‘å°†å…¶å‘½åä¸º<code>inner_cover.html</code>,æ„ä¸ºâ€œå†…éƒ¨çš„å°é¢â€ï¼Œåœ¨<code>inner_cover.html</code>ä¸­ï¼Œè®¾ç½®<code>max-width: 720px</code>ã€‚</p><p>æ¥ç€ï¼Œå»åˆ°æ‰€ç”¨ä¸»é¢˜è·¯å¾„ä¸‹çš„<code>layouts/_default</code>ï¼Œå¤åˆ¶å…¶ä¸­çš„<code>single.html</code>è‡³ç«™ç‚¹ç›®å½•ä¸‹çš„<code>layouts/_default</code>ã€‚PaperModä¸»é¢˜æ‰€æä¾›çš„<code>single.html</code>æœ‰å…³å°é¢æ¸²æŸ“çš„ä»£ç ä¸º<code>{{- partial "cover.html" (dict "cxt" . "IsSingle" true "isHidden" $isHidden) }}</code>ï¼Œå°†<code>cover.html</code>æ›¿æ¢ä¸º<code>inner_cover.html</code>ï¼Œè‡³æ­¤ï¼ŒHugoåœ¨æ¸²æŸ“æ–‡ç« æ—¶ï¼Œä¼šå°†<code>inner_cover.html</code>çš„è®¾å®šåº”ç”¨åˆ°æ–‡ç« è¯¦æƒ…é¡µå°é¢ã€‚</p><p>ä¸Šé¢çš„è§£è€¦æ“ä½œå‚è€ƒäº†<a href=https://www.sulvblog.cn/posts/blog/img_right/#3-%E8%A7%A3%E5%86%B3%E5%86%B2%E7%AA%81>Hugoåšå®¢æ–‡ç« å°é¢å›¾ç‰‡ç¼©å°å¹¶ç§»åˆ°ä¾§è¾¹ | PaperModä¸»é¢˜ | Sulv&rsquo;s Blog</a>,ç›¸å…³æ“ä½œä¹Ÿå¯å‚é˜…è¿™ç¯‡æ–‡ç« ã€‚è¿™ç¯‡æ–‡ç« æåˆ°</p><blockquote><p>æŠŠcover1.htmlæ–‡ä»¶é‡Œçš„<code>&lt;figure class="entry-cover"></code>ä¿®æ”¹ä¸º<code>&lt;figure class="entry-cover1"></code></p></blockquote><p>ä½†æ˜¯ï¼Œåœ¨æˆ‘è¿›è¡Œäº†å¦‚ä¸Šæ“ä½œåï¼Œæ–‡ç« å†…å°é¢çš„åœ†è§’æ¶ˆå¤±ï¼Œä¼¼ä¹è¿™ä¸ªæ“ä½œå½±å“æ–‡ç« å†…å°é¢çš„æ ·å¼ã€‚æœ¬ç€â€œå¦‚æ— å¿…è¦ï¼Œå‹¿å¢å®ä½“â€çš„å¥¥å¡å§†å‰ƒåˆ€ç²¾ç¥ï¼Œæˆ‘é€‰æ‹©ä¸è¿›è¡Œä¿®æ”¹ã€‚ç»å¿«é€Ÿæµ‹è¯•ï¼Œä¸è¿›è¡Œå¦‚ä¸Šæ“ä½œå¹¶æœªå¸¦æ¥å¯è§çš„è´Ÿé¢æ•ˆæœã€‚</p><p>æ­¤å¤–ï¼Œåœ¨è¿›è¡Œè§£è€¦å‰ï¼Œå¦‚æœæ–‡ç« åŒæ—¶å­˜åœ¨å°é¢å’Œæ’å›¾ï¼Œé‚£ä¹ˆæ–‡ç« å†…å°é¢çš„å°ºå¯¸ä¸å›¾ç‰‡ä¸€è‡´ï¼›æ–‡ç« åªå­˜åœ¨å°é¢è€Œæ— æ’å›¾ï¼Œåˆ™æ–‡ç« å†…å°é¢å°ºå¯¸ä¸ä¸»é¡µå°é¢ä¸€è‡´ã€‚è¿™ç§æƒ…å†µåº”è¯¥æ˜¯æŸå¤„ä»£ç è°ƒç”¨å¯¼è‡´çš„ï¼Œä¸ä¸€å®šæ˜¯bugã€‚</p><h3 id=ç»†èŠ‚è¯´æ˜>ç»†èŠ‚è¯´æ˜<a hidden class=anchor aria-hidden=true href=#ç»†èŠ‚è¯´æ˜>#</a></h3><h4 id=css>CSS<a hidden class=anchor aria-hidden=true href=#css>#</a></h4><p>æ–¹æ¡ˆä¸­çš„CSSéƒ¨åˆ†é™¤å¸¸è§„çš„æ ·å¼è°ƒæ•´å¤–ï¼Œè¿˜æœ‰å ä½ä½œç”¨ï¼Œæ˜¯æœ¬æ–¹æ¡ˆçš„æ ¸å¿ƒã€‚</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#7ee787>style</span>&gt;
</span></span><span style=display:flex><span>    .<span style=color:#f0883e;font-weight:700>container</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>display</span>: <span style=color:#79c0ff>flex</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>justify-content</span>: <span style=color:#79c0ff>center</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>align-items</span>: <span style=color:#79c0ff>center</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>width</span>: <span style=color:#a5d6ff>100</span><span style=color:#ff7b72>%</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>max-width</span>: <span style=color:#a5d6ff>720</span><span style=color:#ff7b72>px</span>;
</span></span><span style=display:flex><span>        aspect-ratio: <span style=color:#a5d6ff>16</span><span style=color:#ff7b72;font-weight:700>/</span><span style=color:#a5d6ff>9</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>position</span>: <span style=color:#79c0ff>relative</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>background-color</span>: rgba(<span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>0</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    .<span style=color:#f0883e;font-weight:700>container</span> <span style=color:#7ee787>img</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>max-width</span>: <span style=color:#a5d6ff>100</span><span style=color:#ff7b72>%</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>height</span>: <span style=color:#79c0ff>auto</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>display</span>: <span style=color:#79c0ff>block</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>&lt;/<span style=color:#7ee787>style</span>&gt;
</span></span></code></pre></td></tr></table></div></div><p>å…¶ä¸­ï¼Œ<code>width: 100%; max-width: 720px; aspect-ratio: 16/9;</code>æ˜¯èµ·å ä½ä½œç”¨çš„å…³é”®ï¼šå°†<code>&lt;div></code>è®¾ç½®ä¸ºæœ‰æœ€å¤§å®½åº¦ï¼Œä¸”æ¯”ä¾‹å›ºå®šçš„å®¹å™¨ã€‚è¿™æ ·ï¼Œä¾¿èƒ½åœ¨å›¾ç‰‡åŠ è½½å‰é¢„ç•™ä¸€å®šçš„ç©ºé—´ã€‚</p><p>åœ¨å‰å‡ ç‰ˆçš„ä»£ç ä¸­ï¼Œæœ‰è¿‡è®¾ç½®å›ºå®š<code>width</code>æˆ–<code>height</code>çš„å°è¯•ï¼Œä½†æ˜¯å›ºå®šå¤§å°ä¼šä½¿ä¸åŒå®¢æˆ·ç«¯çš„å›¾ç‰‡å°ºå¯¸æ˜¾ç¤ºä¸€è‡´ï¼Œå¯¼è‡´ç§»åŠ¨ç«¯çš„æ’ç‰ˆå¼‚å¸¸ã€‚ä½¿ç”¨â€œæœ€å¤§â€å’Œâ€œæœ€å°â€æ¥è§„å®šå¤§å°ï¼Œä½¿å¾—å®¹å™¨èƒ½å¤Ÿé€‚åº”ä¸åŒå®¢æˆ·ç«¯çš„æ’ç‰ˆã€‚</p><p>è®¾ç½®<code>aspect-ratio</code>æ˜¯ä»¥é—´æ¥çš„æ–¹æ³•é€šè¿‡å®¹å™¨å®½åº¦å¾—åˆ°å®¹å™¨é«˜åº¦ï¼Œä¸èƒ½é€šè¿‡å›ºå®šæ•°å€¼è®¾ç½®çš„åŸå› åŒä¸Šï¼›åŒæ—¶ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨<code>max-height</code>ã€<code>min-height</code>æ¥è®¾ç½®é«˜åº¦ï¼Œå®ƒä»¬åŒæ ·å¯èƒ½å¯¼è‡´æ’ç‰ˆå¼‚å¸¸ï¼Œè€Œä¸”ä½œä¸ºæœ€å¤§å€¼ä¸æœ€å°å€¼ï¼Œå®ƒä»¬åªèƒ½è§„å®šé«˜åº¦çš„èŒƒå›´ï¼Œä¸èƒ½èµ·å›ºå®šæ•°å€¼çš„å ä½ä½œç”¨ã€‚<code>aspect-ratio</code>èƒ½åœ¨æš‚æ—¶ä¸è®¾ç½®é«˜åº¦çš„æƒ…å†µä¸‹å›ºå®šå®¹å™¨é«˜åº¦ï¼Œä»¥å¾—åˆ°ä¸€ä¸ªæœ‰å¤§å°çš„<code>&lt;div></code>ã€‚</p><p><code>display: flex; justify-content: center; align-items: center;</code>èµ·å±…ä¸­ä½œç”¨ï¼Œå±…ä¸­ä¸ä»…å¯ä»¥é¿å…è®¸å¤šæ„å¤–çš„æ’ç‰ˆé”™è¯¯ï¼Œè¿˜èƒ½ä½¿å›¾åƒçš„æ›¿ä»£æ–‡å­—ï¼ˆaltå±æ€§ï¼‰å±…ä¸­ï¼Œæ›´åŠ ç¾è§‚ã€‚</p><p>å®¹å™¨çš„èƒŒæ™¯é¢œè‰²ä½¿ç”¨<code>background-color: rgba(0, 0, 0, 0);</code>è®¾ç½®ä¸ºé€æ˜ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå…¶å®ƒé¢œè‰²ï¼Œæˆ–è€…æ˜¾ç¤ºè‡ªå®šä¹‰çš„CSSæ ·å¼å’Œå›¾ç‰‡ã€‚å»ºè®®è®¾ç½®æ—¶è¾…ä»¥<code>border-radius</code>ï¼Œé¿å…èƒŒæ™¯åœ†è§’ä¸ä¸Šå±‚å›¾ç‰‡ä¸åŒ¹é…ï¼Œå¯¼è‡´èƒŒæ™¯éœ²å‡ºï¼›æˆ–è€…ä½¿ç”¨JavaScriptï¼Œåœ¨å›¾ç‰‡åŠ è½½åéšè—å®¹å™¨èƒŒæ™¯ã€‚</p><h4 id=javascript>JavaScript<a hidden class=anchor aria-hidden=true href=#javascript>#</a></h4><p>æ–¹æ¡ˆä¸­ä½¿ç”¨çš„JavaScriptåŠŸèƒ½ä¸ºè®¡ç®—å®¹å™¨çš„é«˜åº¦ï¼Œä½¿å…¶ä¸å›¾ç‰‡é«˜åº¦ä¸€è‡´ã€‚</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#7ee787>script</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>function</span> resizeContainer(img) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> container <span style=color:#ff7b72;font-weight:700>=</span> img.parentElement;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> aspectRatio <span style=color:#ff7b72;font-weight:700>=</span> img.naturalHeight <span style=color:#ff7b72;font-weight:700>/</span> img.naturalWidth;
</span></span><span style=display:flex><span>        container.style.height <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>`</span><span style=color:#a5d6ff>${</span>container.clientWidth <span style=color:#ff7b72;font-weight:700>*</span> aspectRatio<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>px`</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>&lt;/<span style=color:#7ee787>script</span>&gt;
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœèƒ½å¤Ÿæ¥å—è¶…å®½å›¾ç‰‡å¸¦æ¥çš„ä¸Šä¸‹ç©ºé—´ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±ä¸æ˜¯å¿…è¦çš„ã€‚åˆ é™¤è¿™æ®µJavaScriptåï¼Œåœ¨æ˜¾ç¤ºè¶…å®½å›¾ç‰‡æ—¶ï¼Œä¼šå‡ºç°ç±»ä¼¼â€œä»¥16:9çš„å±å¹•æ’­æ”¾21:9çš„è§†é¢‘â€é€ æˆçš„ä¸Šä¸‹ç©ºä½™ï¼›ç„¶è€Œï¼Œåœ¨æ˜¾ç¤ºè¶…é«˜å›¾ç‰‡æ—¶ï¼Œç”±äº<code>aspect-ratio</code>çš„éå¼ºåˆ¶æ€§ï¼Œå›¾ç‰‡å’Œå®¹å™¨å‡ä¼šæ­£å¸¸æ˜¾ç¤ºï¼Œæ˜¾ç¤ºæƒ…å†µä¸ä¸‹å›¾ä¸€è‡´ã€‚</p><p><style>.container{display:flex;justify-content:center;align-items:center;width:100%;max-width:720px;aspect-ratio:16/9;position:relative;background-color:transparent}.container img{max-width:100%;height:auto;display:block}</style><div class=container><img onload=resizeContainer(this) loading=lazy src=02.avif alt=è¶…é«˜å›¾ç‰‡ç¤ºä¾‹ title=è¶…é«˜å›¾ç‰‡ç¤ºä¾‹></div><script>function resizeContainer(e){const t=e.parentElement,n=e.naturalHeight/e.naturalWidth;t.style.height=`${t.clientWidth*n}px`}</script></p><p>å‡½æ•°ä¸­é€šè¿‡æ¯”ä¾‹é—´æ¥è®¡ç®—<code>&lt;div></code>æ‰€éœ€é«˜åº¦ï¼Œè¿™ä¼šåœ¨æŸäº›è¿‡äºå¤æ‚çš„æƒ…å†µä¸‹å¼•å…¥ç»†å¾®ä¸å¯è§çš„è¯¯å·®ã€‚ä½†æ˜¯ç›´æ¥é€šè¿‡å›¾ç‰‡é«˜åº¦èµ‹å€¼å®¹å™¨é«˜åº¦ï¼Œä¼šå‡ºç°è¾ƒå¤§ç¨‹åº¦çš„åå·®ï¼Œæ‰€å¾—é«˜åº¦å€¼è¿œè¶…å›¾ç‰‡å®é™…é«˜åº¦ï¼Œæ‰€ä»¥é—´æ¥è®¡ç®—åœ¨è¿™ä¸ªæƒ…å†µä¸‹æ˜¯ä¼˜è§£ã€‚</p><h2 id=avifå›°å¢ƒ>AVIFå›°å¢ƒ<a hidden class=anchor aria-hidden=true href=#avifå›°å¢ƒ>#</a></h2><h3 id=hugoä¸­çš„avif>Hugoä¸­çš„AVIF<a hidden class=anchor aria-hidden=true href=#hugoä¸­çš„avif>#</a></h3><p>ä¸Šé¢èŠ±äº†ä¸å°‘æ—¶é—´ï¼Œå¾—åˆ°äº†ä¸€ä¸ªâ€œä¼ªè§£å†³æ–¹æ¡ˆâ€ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¦ä¼ªè§£å†³è€Œä¸èƒ½çœŸæ­£è§£å†³å‘¢ï¼Ÿ</p><p>å®é™…ä¸Šï¼Œæœ‰å…³Hugoçš„CLSé—®é¢˜ï¼Œå‰äººæä¾›äº†å¾ˆå¤šè§£å†³æ–¹æ¡ˆï¼Œä¾‹å¦‚ï¼š</p><ul><li><a href=https://dvel.me/posts/fix-hugo-cls/>ä¿®å¤ Hugo æœ¬åœ°å›¾ç‰‡çš„ç´¯è®¡å¸ƒå±€åç§»ï¼ˆCLSï¼‰é—®é¢˜ - Dvel&rsquo;s Blog</a></li><li><a href=https://liudon.com/posts/responsive-and-optimized-images-with-hugo/>ä½¿ç”¨Hugoå®ç°å“åº”å¼å’Œä¼˜åŒ–çš„å›¾ç‰‡ | æµåŠ¨</a></li><li><a href=https://blog.dsrkafuu.net/post/2022/hugo-image-lazyload-and-placeholder/>Hugo å›¾ç‰‡æ‡’åŠ è½½å’Œè‡ªé€‚åº” CSS å›¾ç‰‡å ä½ | DSRBLOG</a></li></ul><p>è¿™äº›æ–¹æ¡ˆæˆ‘éƒ½ä¸€ä¸€å°è¯•ï¼Œä½†æ˜¯æ— ä¸€ä¾‹å¤–ï¼Œéƒ½ä¼šé‡åˆ°å½¢å¦‚<code>execute of template failed at &lt;$img.Width>: error calling Width: this method is only available for image resources</code>çš„é”™è¯¯ã€‚</p><p>ä¸€å¼€å§‹æˆ‘ä»¥ä¸ºæ˜¯ç«™ç‚¹ç»“æ„ã€å‡½æ•°å‚æ•°ä¹‹ç±»çš„ä»£ç é”™è¯¯ï¼Œä¸€ç•ªç¢°å£å¿ƒç°æ„å†·åï¼Œåœ¨æ— æ„é—´æœç´¢â€Hugo AVIFâ€œæ—¶ï¼Œæ‰å¾—åˆ°ç­”æ¡ˆï¼šHugoå¹¶ä¸æ”¯æŒå¤„ç†AVIFã€‚</p><p>Hugoçš„Githubä»“åº“ä¸­æœ‰ä¸€ä¸ª2020å¹´åˆ›å»ºçš„Issueï¼š<a href=https://github.com/gohugoio/hugo/issues/7837>Add image processing support for AVIF Â· Issue #7837 Â· gohugoio/hugo</a>ï¼Œå…¶ä¸­å°±æœ‰å¯¹AVIFæ”¯æŒçš„è¯·æ±‚ï¼Œè€Œå¼€å‘è€…ä¹Ÿåšå‡ºäº†å›å¤ï¼š</p><blockquote><p>No. I&rsquo;m the one who spend the most of my free time maintaining this project, so adding new C(++) dependencies is almost never going to happen unless we really, really need it. I have not calculated the cost of adding WebP to Hugo, but it wasn&rsquo;t cheap. I&rsquo;ll keep this issue open as things may change, but it&rsquo;s not very likely unless a top quality native Go decoder/encoder pops up.</p><p>ä¸ã€‚æˆ‘æ˜¯é‚£ä¸ªèŠ±è´¹å¤§é‡ç©ºé—²æ—¶é—´ç»´æŠ¤è¿™ä¸ªé¡¹ç›®çš„äººï¼Œæ‰€ä»¥é™¤éæˆ‘ä»¬çœŸçš„éå¸¸éœ€è¦ï¼Œå¦åˆ™å‡ ä¹ä¸ä¼šæ·»åŠ æ–°çš„C(++)ä¾èµ–ã€‚æˆ‘æ²¡æœ‰è®¡ç®—è¿‡å°†WebPæ”¯æŒæ·»åŠ åˆ°Hugoçš„æˆæœ¬ï¼Œä½†æˆæœ¬å¹¶ä¸ä½ã€‚æˆ‘ä¼šä¿æŒè¿™ä¸ªé—®é¢˜çš„å¼€æ”¾çŠ¶æ€ï¼Œå› ä¸ºæƒ…å†µå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†é™¤éå‡ºç°é«˜è´¨é‡çš„ï¼ˆä»¥Goç¼–å†™çš„ï¼‰AVIFè§£ç å™¨/ç¼–ç å™¨ï¼Œå¦åˆ™è¿™ç§å¯èƒ½æ€§ä¸å¤§ã€‚</p></blockquote><p>ç›´åˆ°è¿™ç¯‡æ–‡ç« è¯ç”Ÿä¹‹æ—¶ï¼Œè®¸å¤šHugoç”¨æˆ·æœŸå¾…çš„â€ä»¥Goç¼–å†™çš„é«˜è´¨é‡çš„AVIFè§£ç å™¨/ç¼–ç å™¨â€œä»ç„¶æ²¡æœ‰å‡ºç°ï¼Œæˆ–æ˜¯å‡ºç°äº†ä½†æ˜¯æ²¡æœ‰åˆå¹¶åˆ°Hugoä¹‹ä¸­ï¼Œäºæ˜¯Hugoå¯¹AVIFçš„æ”¯æŒä¹Ÿå°±æ²¡æœ‰äº†ä¸‹æ–‡ã€‚</p><h3 id=ä¼ªè§£å†³æ–¹æ¡ˆçš„ä¼˜åŠ£>ä¼ªè§£å†³æ–¹æ¡ˆçš„ä¼˜åŠ£<a hidden class=anchor aria-hidden=true href=#ä¼ªè§£å†³æ–¹æ¡ˆçš„ä¼˜åŠ£>#</a></h3><p>æ—¢ç„¶Hugoä¸æ”¯æŒå¤„ç†AVIFæ ¼å¼çš„å›¾ç‰‡ï¼Œå‡ºç°â€this method is only available for image resourcesâ€œçš„æŠ¥é”™ä¹Ÿå°±ä¸éš¾ç†è§£äº†ï¼šåœ¨Hugoçœ¼ä¸­ï¼ŒAVIFæ ¼å¼çš„å›¾ç‰‡ä¸å±äºå›¾ç‰‡èµ„æºã€‚</p><p>å¤±å»äº†Hugoçš„å›¾ç‰‡å¤„ç†åŠŸèƒ½ï¼Œä¸ä»…è®©æˆ‘çš„â€å“åº”å¼å›¾ç‰‡â€œè¢«ç¦ç”¨ï¼Œæ›´è®©CLSçš„è§£å†³å˜å¾—å¾ˆæ›²æŠ˜ï¼Œæœ€ç»ˆåœ¨æœ‰é™çš„æ—¶é—´å’ŒçŸ¥è¯†å‚¨å¤‡ä¸‹ï¼Œæˆ‘å¾—åˆ°äº†ä¸Šé¢çš„ä¼ªè§£å†³æ–¹æ¡ˆã€‚è™½è¯´ç§°å…¶ä¸ºâ€ä¼ªè§£å†³æ–¹æ¡ˆâ€œï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•è¿˜æ˜¯æœ‰å…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿ï¼š</p><ul><li>å›¾ç‰‡æ ¼å¼çš„å‘åå…¼å®¹æ€§</li><li>è·¨ç”Ÿæˆå™¨çš„å…¼å®¹æ€§</li></ul><p>å›¾ç‰‡æ ¼å¼çš„å…¼å®¹æ€§å¾ˆå¥½ç†è§£ï¼Œå› ä¸ºHTMLã€CSSå’ŒJavaScriptä¸æ¶‰åŠå¯¹å›¾ç‰‡æœ¬èº«çš„å¤„ç†ï¼Œå³ä½¿å°†å›¾ç‰‡æ ¼å¼ä»AVIFæ¢åˆ°JPEG XLã€WebP2æˆ–æ˜¯æ›´åŠ å…ˆè¿›çš„æ ¼å¼ï¼Œä¸Šé¢çš„ä»£ç ä¹Ÿåº”è¯¥èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚</p><p>è·¨ç”Ÿæˆå™¨å…¼å®¹æ€§æ˜¯åœ¨Hugoä¸æ”¯æŒAVIFçš„æƒ…å†µä¸‹åº”è¿è€Œç”Ÿçš„ï¼Œå¤±å»äº†Hugoçš„å›¾ç‰‡å¤„ç†åŠŸèƒ½ä¹Ÿæ„å‘³ç€ä¸éœ€è¦Hugoçš„å›¾ç‰‡å¤„ç†åŠŸèƒ½ï¼Œå³ä½¿æœ‰ä¸€å¤©æˆ‘éœ€è¦æ›´æ¢é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼ˆSSGï¼‰ï¼Œé€šè¿‡ç®€å•çš„ä»£ç æ›¿æ¢ï¼Œå°±å¯ä»¥å®Œæˆç§»æ¤ã€‚</p><p>è™½ç„¶æœ‰ä¼˜ç‚¹ï¼Œä½†æ˜¯å®ƒçš„ç¼ºç‚¹ä¹Ÿä¸èƒ½å¿½è§†ï¼š</p><ul><li>å ä½å…ƒç´ å¤§å°å›ºå®šï¼Œä¸éšå›¾ç‰‡å°ºå¯¸å˜åŒ–</li><li>æ²¡æœ‰äºŒæ¬¡è®¡ç®—çš„èƒ½åŠ›</li></ul><p>å ä½å…ƒç´ å¤§å°å›ºå®šæ˜¯éå¸¸è‡´å‘½çš„ç¼ºç‚¹ï¼Œä¹Ÿæ˜¯è¿™ä¸ªæ–¹æ¡ˆè¢«ç§°ä½œâ€ä¼ªè§£å†³â€œçš„æ ¹æœ¬åŸå› ã€‚åœ¨æ— æ³•æå‰è·çŸ¥å›¾ç‰‡å°ºå¯¸çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ— æ³•å¯¹å ä½å®¹å™¨åšå‡ºè°ƒæ•´ï¼Œåªèƒ½å¤Ÿé€‰æ‹©å›ºå®šä¸€ä¸ªé€šç”¨å¤§å°ã€‚é€šè¿‡HTMLå’ŒJavaScriptå½“ç„¶ä¹Ÿèƒ½å¤Ÿå®ç°æå‰è·çŸ¥å›¾ç‰‡å°ºå¯¸ï¼Œä½†æ˜¯è¿™æ ·å®ç°çš„å›¾ç‰‡åŠ è½½å‰è°ƒæ•´åœ¨ç½‘é¡µåŠ è½½å‘¨æœŸçš„ä½ç½®è¿‡äºé åï¼Œå‡ ä¹æ˜¯è°ƒæ•´å®¹å™¨å¤§å°å’Œå›¾ç‰‡åŠ è½½åŒæ­¥è¿›è¡Œï¼Œèµ·ä¸åˆ°â€æå‰â€œçš„ä½œç”¨ï¼ŒåŒæ ·ä¼šå¼•å…¥CLSï¼Œè¿˜ä¼šä½¿ä»£ç æ›´åŠ å¤æ‚ï¼Œå› æ­¤ä½œç½¢ã€‚</p><p>ä¸Šé¢çš„ä¼ªè§£å†³æ–¹æ¡ˆåœ¨åŠ è½½é16:9æ¯”ä¾‹çš„å›¾ç‰‡æ—¶ï¼Œä¼šäºŒæ¬¡è°ƒæ•´ä½ç½®ã€‚é‰´äºæˆ‘æ‰€ä½¿ç”¨çš„å›¾ç‰‡å¤§å¤šä¸ºåŠ¨ç”»æˆªå›¾ï¼Œæ¯”ä¾‹ä¸€è‡´ï¼ŒäºŒæ¬¡è°ƒæ•´ä½ç½®æ‰€å¼•å…¥çš„CLSè¾ƒå°‘ï¼Œäºæ˜¯è¿™ä¸ªä¼ªè§£å†³æ–¹æ¡ˆåœ¨æˆ‘ä¸ªäººçš„ä½¿ç”¨åœºæ™¯æ‰ä¸‹æœ‰äº†æˆç«‹çš„å¯èƒ½ã€‚</p><p>å¦‚æœæ‰€ä½¿ç”¨çš„å›¾ç‰‡å¤§å°ä¸ä¸€ï¼Œè¿™ä¸ªæ–¹æ¡ˆçš„æ•ˆæœå°±ä¼šè¾ƒå·®ï¼Œè¿™æ—¶ä¾¿ä¸åº”ç§°å…¶ä¸ºä¼ªè§£å†³æ–¹æ¡ˆäº†ï¼Œå«æ”¹å–„æ–¹æ¡ˆæ›´ä¸ºåˆé€‚ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å›ºå®šå®¹å™¨å¤§å°ï¼Œä»¤å›¾ç‰‡æ¯”ä¾‹å›ºå®šä»¥é€‚åº”å®¹å™¨ï¼Œä»£ä»·å°±æ˜¯å›¾ç‰‡å››å‘¨ç©ºä½™å’Œç¼©æ”¾ã€‚</p><p>ç¬¬äºŒç‚¹é—®é¢˜æ˜¯åœ¨è°ƒè¯•æ—¶å¶ç„¶å‘ç°çš„ï¼Œå½“ä½¿ç”¨è°ƒè¯•å°ï¼Œå°†å“åº”å¼è®¾è®¡æ¨¡å¼è®¾ç½®åœ¨ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯æ¥å›åˆ‡æ¢æ—¶ï¼Œä¼šäº§ç”Ÿå›¾ç‰‡é”™ä½ã€‚è¿™æ˜¯é¢„æœŸå†…çš„è¡Œä¸ºï¼Œå› ä¸ºæŒ‰ç…§è®¾è®¡ï¼ŒJavaScriptå‡½æ•°åªä¼šè®¡ç®—ä¸€æ¬¡å®¹å™¨é«˜åº¦ï¼Œå½“UAæ”¹å˜å¯¼è‡´ç«™ç‚¹æ’ç‰ˆå‘ç”Ÿå˜åŒ–ï¼Œå‡½æ•°å¹¶ä¸ä¼šå†æ¬¡è®¡ç®—ã€‚ä¸çŸ¥é“ä½¿ç”¨äº†Hugoç›¸å…³åŠŸèƒ½çš„æ–¹æ¡ˆæ˜¯å¦ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Œä½†æ˜¯é‰´äºè¿™ç§è¡Œä¸ºè¿‡äºç¨€å°‘ä¸”å¼‚å¸¸ï¼Œæˆ‘æ— æ„é’ˆå¯¹è¿™ä¸ªé—®é¢˜æ”¹è¿›ä»£ç ã€‚</p><h3 id=ä¸ºä»€ä¹ˆæ˜¯avif>ä¸ºä»€ä¹ˆæ˜¯AVIF<a hidden class=anchor aria-hidden=true href=#ä¸ºä»€ä¹ˆæ˜¯avif>#</a></h3><p>å…¶å®åœ¨é‡åˆ°è¿™ä¸ªé—®é¢˜çš„ä¸€åˆ»ï¼Œæˆ‘ä¹Ÿæœ‰è€ƒè™‘è¿‡å°†ç«™ç‚¹çš„æ‰€æœ‰å›¾ç‰‡æ ¼å¼æ›´æ¢ä¸ºWebPï¼Œä½†æ˜¯ç»è¿‡ä¸ªäººä¸ä¸¥è°¨ä¸”ä¸»è§‚çš„å°è¯•ä¸å¯¹æ¯”åï¼Œæˆ‘æ”¾å¼ƒäº†ã€‚AVIFåœ¨å‹ç¼©è´¨é‡å’Œä½“ç§¯ä¸Šéƒ½æ¯”WebPæ›´æœ‰ä¼˜åŠ¿ï¼Œå°¤å…¶åœ¨æŸäº›çº¹ç†å¤æ‚çš„åœºæ™¯ï¼ŒWebPä¼šæ¶‚æŠ¹ç»†èŠ‚ï¼Œè€ŒAVIFèƒ½å°†çº¹ç†å°½å¯èƒ½åœ°ä¿ç•™ã€‚ä½œä¸ºä¸€ä¸ªä¸»è¦å‘å¸ƒè§‚åæ„Ÿå’ŒåŠ¨ç”»æˆªå›¾çš„åšå®¢ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºå›¾ç‰‡è´¨é‡è¿˜æ˜¯ç›¸å½“é‡è¦çš„ï¼Œäºæ˜¯AVIFå°±è¿™æ ·è¢«åšæŒäº†ä¸‹æ¥ã€‚</p><p>ä¸ªäººè®¤ä¸ºAVIFæ˜¯ä¸€ä¸ªå…¸å‹çš„â€åŠä»£äº§å“â€œï¼Œå‰æœ‰WebPï¼Œä½œä¸ºå‡ºç°ç›¸å¯¹æ—©ä¸”è¢«å¹¿æ³›åº”ç”¨çš„ç°ä»£å›¾ç‰‡æ ¼å¼ï¼›åæœ‰JPEG XLå’ŒWebP2ï¼Œæä¾›äº†æ›´é«˜çš„å‹ç¼©ç‡ã€ç”»é¢ç»†èŠ‚ä¸å…¶å®ƒå‚æ•°ã€‚AVIFä½œä¸ºä¸­é—´æ´¾ï¼Œåœ¨æµè§ˆå™¨æ™®åŠç‡å’Œæ€§èƒ½é—´å–å¾—äº†å¹³è¡¡ï¼Œæ˜¯æˆ‘æ¯”è¾ƒå–œæ¬¢çš„ä¸­åº¸åšæ´¾ã€‚</p><p>AVIFçš„å‹ç¼©æ€§èƒ½è¿‡äºå¼ºå¤§ï¼Œä»¥è‡³äºè´¨é‡ä¸º20çš„WebPéœ€è¦å’ŒåŒæ ·å¤§å°ã€è´¨é‡ä¸º50çš„AVIFåšæ¯”è¾ƒã€‚åœ¨AVIFé¢å‰çš„WebPæ˜¾å¾—è¿‡äºâ€ä¸ç°ä»£ã€ä¸å…ˆè¿›â€œã€‚ç»è¿‡æ—¶é—´ç§¯ç´¯ï¼Œç°ä»£æµè§ˆå™¨å¯¹AVIFçš„æ”¯æŒæƒ…å†µå·²ç»ç›¸å½“å®Œå–„äº†ï¼Œæˆ‘è®¤ä¸ºç°åœ¨ä½¿ç”¨AVIFï¼Œç™¾åˆ©è€Œæ— ä¸€å®³ã€‚</p><h2 id=zolaåˆæ¢>Zolaåˆæ¢<a hidden class=anchor aria-hidden=true href=#zolaåˆæ¢>#</a></h2><p>ä½œä¸ºé™æ€ç«™ç‚¹ç”Ÿæˆå™¨çš„æ–°æ˜Ÿï¼ŒZolaæ˜¯æˆ‘é¢„å®šçš„ä¸‹ä¸€ä¸ªæ‰€ä½¿ç”¨çš„æ¡†æ¶ã€‚åœ¨é‡åˆ°Hugoä¸AVIFçš„é—®é¢˜æ—¶ï¼Œæˆ‘ä¹Ÿå»äº†è§£äº†ä¸€ç•ªZolaå¯¹äºAVIFçš„æ”¯æŒæƒ…å†µï¼Œæ¯•ç«Ÿå¦‚æœAVIFçš„ç—›ç‚¹åœ¨Hugoæ— æ³•è§£å†³ï¼Œå¯ä»¥é€šè¿‡è¿ç§»ç«™ç‚¹åˆ°æ–°çš„æ¡†æ¶æ ¹é™¤ã€‚</p><p>ä»¤æˆ‘å¤§è·Œçœ¼é•œçš„æ˜¯ï¼ŒZolaä½œä¸ºä½¿ç”¨Rustç¼–å†™çš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œç«Ÿç„¶ä¹Ÿä¸æ”¯æŒå¤„ç†AVIFã€‚Hugoä¸æ”¯æŒAVIFæ˜¯åœ¨ç­‰å¾…ä¸€ä¸ªä»¥Goç¼–å†™çš„AVIFè§£ç å™¨/ç¼–ç å™¨ï¼Œè€ŒRustæ—©å·²æ‹¥æœ‰äº†ä¸€ä¸ªAVIFç¼–ç å™¨<a href=https://github.com/xiph/rav1e>rav1e</a>ï¼Œåªèƒ½æ€ªå¼€å‘è€…ä»¬å¯¹ç°ä»£å›¾ç‰‡æ ¼å¼çš„æ”¯æŒä¸å¤ªä¸Šå¿ƒäº†ã€‚</p><p>å¦å¤–ï¼ŒZolaçš„ç”Ÿæ€ç›¸æ¯”Hugoä¹Ÿå¤ªè¿‡è´«ç˜ ã€‚åœ¨Zolaå®˜æ–¹ç½‘ç«™çš„ä¸»é¢˜é¡µä¸­ï¼Œæˆ‘ä¼¼ä¹æ‰¾ä¸åˆ°ä¸€ä¸ªåŒ…å«æ–‡ç« å°é¢ã€æœç´¢å’Œç›®å½•ç­‰åŠŸèƒ½çš„é«˜åº¦å¯ç”¨çš„ä¸»é¢˜ï¼Œä½œä¸ºæ–°äº‹ç‰©ï¼Œè¿™æ˜¯æ— å¯é¿å…çš„æƒ…å†µã€‚çœ‹æ¥æƒ³è¦ä½“éªŒZolaï¼Œè¿˜éœ€è¦ç¤¾åŒºçš„æˆé•¿å’Œæ—¶é—´çš„æ²‰æ·€ã€‚</p></div><footer class=post-footer><div class=post-meta><ul class=post-tags><li><a href=https://xeonzilla.github.io/tags/tech/>æŠ€æœ¯</a></li><li><a href=https://xeonzilla.github.io/tags/hugo/>Hugo</a></li></ul><ul class=post-series></ul></div><nav class=paginav><a class=prev href=https://xeonzilla.github.io/post/vtuber_legend/><span class=title>Â« ä¸Šä¸€é¡µ</span><br><span>èº«ä¸ºVTuberçš„æˆ‘å› ä¸ºå¿˜è®°å…³å°è€Œæˆäº†ä¼ è¯´</span>
</a><a class=next href=https://xeonzilla.github.io/post/shuumatsu_train_doko_e_iku/><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>æœ«ç­åˆ—è½¦å»å“ªé‡Œï¼Ÿ</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Hugoä¸­çš„AVIFä¸ç´¯ç§¯å¸ƒå±€åç§»ï¼ˆCLSï¼‰ on x" href="https://x.com/intent/tweet/?text=Hugo%e4%b8%ad%e7%9a%84AVIF%e4%b8%8e%e7%b4%af%e7%a7%af%e5%b8%83%e5%b1%80%e5%81%8f%e7%a7%bb%ef%bc%88CLS%ef%bc%89&amp;url=https%3a%2f%2fxeonzilla.github.io%2fpost%2fhugo_avif_cls%2f&amp;hashtags=%e6%8a%80%e6%9c%af%2cHugo"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hugoä¸­çš„AVIFä¸ç´¯ç§¯å¸ƒå±€åç§»ï¼ˆCLSï¼‰ on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fxeonzilla.github.io%2fpost%2fhugo_avif_cls%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hugoä¸­çš„AVIFä¸ç´¯ç§¯å¸ƒå±€åç§»ï¼ˆCLSï¼‰ on whatsapp" href="https://api.whatsapp.com/send?text=Hugo%e4%b8%ad%e7%9a%84AVIF%e4%b8%8e%e7%b4%af%e7%a7%af%e5%b8%83%e5%b1%80%e5%81%8f%e7%a7%bb%ef%bc%88CLS%ef%bc%89%20-%20https%3a%2f%2fxeonzilla.github.io%2fpost%2fhugo_avif_cls%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hugoä¸­çš„AVIFä¸ç´¯ç§¯å¸ƒå±€åç§»ï¼ˆCLSï¼‰ on telegram" href="https://telegram.me/share/url?text=Hugo%e4%b8%ad%e7%9a%84AVIF%e4%b8%8e%e7%b4%af%e7%a7%af%e5%b8%83%e5%b1%80%e5%81%8f%e7%a7%bb%ef%bc%88CLS%ef%bc%89&amp;url=https%3a%2f%2fxeonzilla.github.io%2fpost%2fhugo_avif_cls%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li></ul></footer><div class=comment-toggle-buttons><button id=show-giscus class=active onclick=showGiscus()>Giscus Comments</button>
<button id=show-telegram onclick=showTelegram()>Telegram Discussion</button></div><div id=giscus-comments class=comment-box></div><div id=telegram-discussion class=comment-box></div><style>.comment-toggle-buttons{display:flex;justify-content:center;margin-top:50px;margin-bottom:10px;gap:10px}#telegram-discussion{min-height:186.2px;display:none}.comment-toggle-buttons button{display:block;padding:0 14px;color:var(--primary);font-size:14px;line-height:34px;background:var(--code-bg);border-radius:var(--radius);border:1px solid var(--border)}.comment-toggle-buttons button:hover{background:var(--border)}.comment-toggle-buttons button.active{pointer-events:none;background-color:transparent}</style><script>let telegramLoaded=!1;function showGiscus(){document.getElementById("show-giscus").classList.add("active"),document.getElementById("show-telegram").classList.remove("active"),document.getElementById("giscus-comments").style.display="block",document.getElementById("telegram-discussion").style.display="none",setGiscusTheme()}function showTelegram(){document.getElementById("show-giscus").classList.remove("active"),document.getElementById("show-telegram").classList.add("active"),document.getElementById("giscus-comments").style.display="none",document.getElementById("telegram-discussion").style.display="block",telegramLoaded||(loadTelegramWidget(),telegramLoaded=!0)}const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()==="dark"?"noborder_dark":"noborder_light"}})},loadTelegramWidget=()=>{const t=document.getElementById("telegram-discussion");t.innerHTML="";const e=document.createElement("script");e.src="https://telegram.org/js/telegram-widget.js?22",e.defer=!0,e.setAttribute("data-telegram-discussion","XeonAnimeLog"),e.setAttribute("data-comments-limit","50"),e.setAttribute("data-colorful","1"),e.setAttribute("data-dark",getStoredTheme()==="dark"?"1":"0"),t.appendChild(e)},setTelegramTheme=()=>{loadTelegramWidget()};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"Xeonzilla/Xeonzilla.github.io","data-repo-id":"R_kgDOL6BvNQ","data-category":"Announcements","data-category-id":"DIC_kwDOL6BvNc4Cfb8m","data-mapping":"pathname","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":getStoredTheme()==="dark"?"noborder_dark":"noborder_light","data-lang":"zh-CN",crossorigin:"anonymous"},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),e.defer=!0,document.querySelector("#giscus-comments").appendChild(e),document.getElementById("telegram-discussion").style.display==="block"&&(loadTelegramWidget(),telegramLoaded=!0);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",()=>{setGiscusTheme(),setTelegramTheme()})})</script></article></main><footer class=footer><span>&copy; 2024 <a href=https://xeonzilla.github.io/>Xeonzilla's Note</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><footer class=footer><p class=footer__license xmlns:cc=http://creativecommons.org/ns#>æœ¬ä½œå“æ ¹æ®
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans target=_blank rel="license noopener noreferrer">CC BY-NC-SA 4.0</a>
<img class=footer__img src=https://mirrors.creativecommons.org/presskit/icons/cc.svg alt="Creative Commons">
<img class=footer__img src=https://mirrors.creativecommons.org/presskit/icons/by.svg alt=BY>
<img class=footer__img src=https://mirrors.creativecommons.org/presskit/icons/nc.svg alt=NC>
<img class=footer__img src=https://mirrors.creativecommons.org/presskit/icons/sa.svg alt=SA>
è®¸å¯</p></footer><style>.footer{margin-top:0;padding-top:0}.footer__license{margin-top:-15px}.footer__img{height:22px;margin-left:3px;vertical-align:-25%;display:inline-block}</style><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="å¤åˆ¶";function s(){t.innerHTML="å·²å¤åˆ¶ï¼",setTimeout(()=>{t.innerHTML="å¤åˆ¶"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>